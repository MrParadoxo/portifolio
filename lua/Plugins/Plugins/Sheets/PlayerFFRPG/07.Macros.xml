<?xml version="1.0" encoding="UTF-8"?>
<form name="frmMacros" align="client" theme="dark" margins="{top=1}">
	<layout left="000" top="000" height="650" width="1100">
		<image left="000" top="000" height="650" width="1100" src="/img/wallpaper4.png" style="autoFIT" />
		</layout>

    <layout align="top" height="30" margins="{bottom=4}">
		<button text="Novo Golpe" width="150" align="left">
			<event name="onClick">                       
				self.rclListaDosItens:append();
				</event>
			</button>
		<button text="Organizar" width="150" align="left">
			<event name="onClick">
				self.rclListaDosItens:sort();
				</event>
			</button>
		</layout>
 
	<recordList name="rclListaDosItens" field="campoDosItens" templateForm="frmItemDaLista" align="client" selectable="true">
        <event name="onSelect">              
            local node = self.rclListaDosItens.selectedNode;
            self.boxDetalhesDoItem.node = node;                    
            self.boxDetalhesDoItem.visible = (node ~= nil);
			</event>
        <event name="onCompare">
			if (nodeA.active and not nodeB.active) then
				return -1;
			elseif (not nodeA.active and nodeB.active) then
				return 1;
			else
				return Utils.compareStringPtBr(nodeA.campoNome, nodeB.campoNome);
			end;
            </event>
		</recordList>

    <dataScopeBox name="boxDetalhesDoItem" visible="false" align="right" width="900" margins="{left=4, right=8}">
		<tabControl left="50" top="00" height="530" width="840">
			<tab title="Golpe 1">
				<layout left="010" top="10" width="580" height="560">
					<label left="0" top="00" width="60" height="20" text="Nome:" autoSize="true" fontStyle="bold"/>
					<edit left="65" top="00" width="140" height="20" field="campoNome" />
					<label left="0" top="25" width="60" height="20" text="Alvo:" autoSize="true" fontStyle="bold"/>
					<comboBox left="65" top="25" width="140" height="20" field="catAlvo" horzTextAlign="center" items="{'Único Inimigo', 'Único Aliado', 'Inimigo Aleatório', 'Grupo', 'Aliados', 'Todos', 'Aleatório'}" values="{'1', '2', '3', '4', '5','6', '7'}" />                                      
					<dataLink field="catAlvo" defaultValue="1" />
					<label left="0" top="50" width="60" height="20" text="Acerto:" autoSize="true" fontStyle="bold"/>
					<comboBox left="65" top="50" width="140" height="20" field="catAcerto" horzTextAlign="center" items="{'Precisão Física', 'Precisão Mágica', 'Automático', 'Precisão Física/2'}" values="{'1', '2', '3','4'}" />                                      
					<dataLink field="catAcerto" defaultValue="1" />
					<label left="0" top="75" width="60" height="20" text="Tipo:" autoSize="true" fontStyle="bold"/>
					<comboBox left="65" top="75" width="140" height="20" field="catTipo" horzTextAlign="center" items="{'Não-Elemental', 'Arcano', 'Fogo', 'Gelo', 'Água', 'Eletricidade', 'Terra', 'Vento', 'Bio', 'Trevas', 'Sagrado', 'Recuperação'}" values="{'1', '2', '3', '4', '5','6', '7', '8', '9', '10', '11','12'}" />                                      
					<dataLink field="catTipo" defaultValue="1" />
					</layout>
			
				<layout left="010" top="60" width="580" height="560">
					<label left="0" top="75" width="105" height="20" text="Custo em MP:" autoSize="true" fontStyle="bold"/>
					<edit left="110" top="75" width="30" height="20" field="campoCustoMP" type="number" horzTextAlign="center"/>
					<button left="145" top="75" text="Gastar" width="60">
						<event name="onClick">
							if sheet== nil then 
								return 
								end;
							local CustoMP = self.boxDetalhesDoItem.node.campoCustoMP or "0"
							local mesa = Firecast.getMesaDe(sheet);
							if (CustoMP >= 1) then
								mesa.activeChat:enviarMensagem("/MP -" .. CustoMP);
								end
							</event>
						</button>		
					<label left="0" top="100" width="105" height="20" text="Tempo de Carga:" autoSize="true" fontStyle="bold"/>
					<edit left="110" top="100" width="30" height="20" field="campoTC" type="number" horzTextAlign="center"/>
					<button left="145" top="100" text="Carregar" width="60">
						<event name="onClick">
							if sheet== nil then return end;
							local NomeP = sheet.baseName or "???"
							local NomeG = self.boxDetalhesDoItem.node.campoNome or "???";
							local TempoCarga = self.boxDetalhesDoItem.node.campoTC or 0;
							local mesa = Firecast.getMesaDe(sheet);
							mesa.activeChat:enviarMensagem("[§B]" .. NomeP .. "[§B]" .. " carrega o golpe [§B]" .. NomeG .. "[§B] (TC " .. TempoCarga .. " )");
							</event>
						</button>
					</layout>

				<layout left="230" top="60" width="300" height="300">
					<label left="00" top="00" width="80" height="20" text="Subtrai:" horzTextAlign="leading" autoSize="true" fontStyle="bold"/>
					<comboBox left="50" top="00" width="80" height="20" field="fieldSubEVA" horzTextAlign="center" items="{'EVA', 'EVAM', 'EVA/2', 'Nada'}" values="{'1', '2', '3', '4'}" />                                      
					<dataLink field="fieldSubEVA" defaultValue="1" />
					<label left="00" top="25" width="80" height="20" text="Subtrai:" horzTextAlign="leading" autoSize="true" fontStyle="bold"/>
					<comboBox left="50" top="25" width="80" height="20" field="fieldSubDEF" horzTextAlign="center" items="{'ARM', 'ARMM', 'ARM/2', 'ARMM/2', 'Nada'}" values="{'1', '2', '3', '4', '5'}" />                                      
					<dataLink field="fieldSubDEF" defaultValue="1" />
					</layout>
			
				<layout left="230" top="85" width="300" height="300">	
					<label left="00" top="50" width="80" height="20" text="Custo HP%:" horzTextAlign="leading" autoSize="true" fontStyle="bold"/>
					<edit top="50" left="75" width="55" height="20" field="campoCustoHP" horzTextAlign="center"/>	
					<label left="00" top="75" width="80" height="20" text="Repetições:" horzTextAlign="leading" autoSize="true" fontStyle="bold"/>
					<edit top="75" left="75" width="55" height="20" field="campoRepeat" horzTextAlign="center" type="number"/>	
					<dataLink field="campoRepeat" defaultValue="1" />
					</layout>

				<layout left="365" top="10" width="500" height="300">
					<label left="25" top="00" width="300" height="20" text="Status" horzTextAlign="center" autoSize="true" fontStyle="bold"/>
					<checkBox top="00" left="330" width="20" height="20" field="activeSRANDOM"/>
					<label left="355" top="00" width="150" height="20" text="Status Aleatório" horzTextAlign="leading" autoSize="true" fontStyle="bold"/>					
					<StatusNeg Top ="25" num="1"/>
					<StatusNeg Top ="50" num="2"/>
					<StatusNeg Top ="75" num="3"/>
					<StatusNeg Top ="100" num="4"/>
					<StatusNeg Top ="125" num="5"/>
					<StatusNeg Top ="150" num="6"/>
					</layout>

				<layout left="10" top="215" width="400" height="300">
					<radioButton top="00" left="20" width="20" height="20" groupName="AtkTypeG" field="AtkTypeF" fieldValue="1"/>
					<radioButton top="25" left="20" width="20" height="20" groupName="AtkTypeG" field="AtkTypeF" fieldValue="2"/>
					<radioButton top="00" left="230" width="20" height="20" groupName="AtkTypeG" field="AtkTypeF" fieldValue="3"/>
					<radioButton top="25" left="230" width="20" height="20" groupName="AtkTypeG" field="AtkTypeF" fieldValue="4"/>
					<dataLink field="AtkTypeF" defaultValue="1" />
					<label left="25" top="00" width="120" height="20" text="Sem Dano" horzTextAlign="center" autoSize="true" fontStyle="bold"/>
					<label left="50" top="25" width="40" height="20" text="Dado" horzTextAlign="center" autoSize="true" fontStyle="bold"/>
					<label left="100" top="25" width="40" height="20" text="Mult." horzTextAlign="center" autoSize="true" fontStyle="bold"/>
					<label left="150" top="25" width="40" height="20" text="Atrib." horzTextAlign="center" autoSize="true" fontStyle="bold"/>
					<label left="92" top="50" width="5" height="20" text="+" horzTextAlign="center" autoSize="true" fontStyle="bold"/>
					<label left="142" top="50" width="5" height="20" text="x" horzTextAlign="center" autoSize="true" fontStyle="bold"/>	
					<edit top="50" left="50" width="40" height="20" field="dadoGolpe" />
					<edit top="50" left="100" width="40" height="20" field="multGolpe" />
					<comboBox top="50" left="150" width="60" height="20" field="atribGolpe" horzTextAlign="center" items="{'FOR', 'AGI', 'MAG'}" values="{'1', '2', '3'}" />                                      	
					<dataLink field="atribGolpe" defaultValue="3" />
					<label left="240" top="00" width="120" height="20" text="Base na Arma 1" horzTextAlign="center" autoSize="true" fontStyle="bold"/>
					<label left="240" top="25" width="120" height="20" text="Base na Arma 2" horzTextAlign="center" autoSize="true" fontStyle="bold"/>
					<label left="230" top="50" width="105" height="20" text="Margem Crít.%:" autoSize="true" fontStyle="bold"/>			
					<edit left="330" top="50" width="30" height="20" field="campoMargem" type="number" horzTextAlign="center"/> 
					</layout>
	
				<layout left="25" top="300" width="300" height="300">
					<label top="00" left="60" width="140" height="20" text="Fator Multiplicativo" horzTextAlign="leading" autoSize="true" fontStyle="bold"/>
					<Physiscal Top ="25" num="1" Text = "25%" Mult = "0.25"/>
					<Physiscal Top ="50" num="2" Text = "50%" Mult = "0.50"/>
					<Physiscal Top ="75" num="3" Text = "75%" Mult = "0.75"/>
					<Physiscal Top ="100" num="4" Text = "100%" Mult = "1"/>
					<Physiscal Top ="125" num="5" Text = "125%" Mult = "1.25"/>
					<Physiscal Top ="150" num="6" Text = "150%" Mult = "1.50"/>
					</layout>
				<layout left="100" top="300" width="100" height="300">
					<Physiscal Top ="025" num="7" Text = "175%" Mult = "1.75"/>
					<Physiscal Top ="050" num="8" Text = "200%" Mult = "2.00"/>
					<Physiscal Top ="075" num="9" Text = "225%" Mult = "2.25"/>
					<Physiscal Top ="100" num="10" Text = "250%" Mult = "2.50"/>
					<Physiscal Top ="125" num="11" Text = "275%" Mult = "2.75"/>
					<Physiscal Top ="150" num="12" Text = "300%" Mult = "3.00"/>
					</layout>	
				<layout left="175" top="300" width="100" height="300">
					<Physiscal Top ="025" num="13" Text = "325%" Mult = "3.25"/>
					<Physiscal Top ="050" num="14" Text = "350%" Mult = "3.50"/>
					<Physiscal Top ="075" num="15" Text = "375%" Mult = "3.75"/>
					<Physiscal Top ="100" num="16" Text = "400%" Mult = "4.00"/>
					<Physiscal Top ="125" num="17" Text = "425%" Mult = "4.25"/>
					<Physiscal Top ="150" num="18" Text = "450%" Mult = "4.50"/>
					</layout>

				<layout left="250" top="300" width="500" height="300">
					<checkBox top="25" left="00" width="20" height="20" field="activeBDM"/>
					<label left="25" top="25" width="150" height="20" text="B. Dam. Limit" horzTextAlign="leading" autoSize="true" fontStyle="bold"/>
					<checkBox top="50" left="00" width="20" height="20" field="activeTripleCrit"/>
					<label left="25" top="50" width="150" height="20" text="Triple Critical" horzTextAlign="leading" autoSize="true" fontStyle="bold"/>
					<checkBox top="75" left="00" width="20" height="20" field="activeConsMP"/>
					<label left="25" top="75" width="150" height="20" text="Consumir MP" horzTextAlign="leading" autoSize="true" fontStyle="bold"/>
					<checkBox top="100" left="00" width="20" height="20" field="activeConsHP"/>
					<label left="25" top="100" width="150" height="20" text="Consumir HP" horzTextAlign="leading" autoSize="true" fontStyle="bold"/>
					<checkBox top="125" left="00" width="20" height="20" field="activeSamCur"/>
					<label left="25" top="125" width="150" height="20" text="Exaurir" horzTextAlign="leading" autoSize="true" fontStyle="bold"/>
					<edit left="80" top="125" width="30" height="20" field="campoCurse" type="number" horzTextAlign="center"/>
					<checkBox top="150" left="00" width="20" height="20" field="checkAmmo"/>
					<label left="25" top="150" width="150" height="20" text="Munição Especial" horzTextAlign="leading" autoSize="true" fontStyle="bold"/>
					<edit left="25" top="175" width="100" height="20" field="campoAmmo" horzTextAlign="center"/>
					</layout>
		
				<button left="230" top="10" width="130" height="45" text="USAR" fontSize="11" fontStyle="bold">
					<event name="onClick">
						local STR = sheet.totSTR or 1;
						local MAG = sheet.totMAG or 1;
						local AGI = sheet.totAGI or 1;
						local PRECP = sheet.valACC or 0;
						local PRECM = sheet.valMACC or 0;
						local DEXTE = sheet.valDEX or 0;
						local MIND = sheet.valMND or 0;
						local EXPER = sheet.valEXP or 0;

						if sheet== nil then return end;
						local mesa = Firecast.getMesaDe(sheet);
						local NOME =""	
						local CMP = tonumber(self.boxDetalhesDoItem.node.campoCustoMP) or 0;					
						if (CMP >= 0) then
							NOME = "[§B]" .. self.boxDetalhesDoItem.node.campoNome .. "[§B] " or "[§B]Golpe[§B]";
							else
							NOME = "[§B]" .. self.boxDetalhesDoItem.node.campoNome .. "[§B][§K14]; " or "[§B]Golpe[§B][§K14]; ";
							end
						local REPEAT = tonumber(self.boxDetalhesDoItem.node.campoRepeat) or 1
						local Att = {};
						Att.STR = tonumber(sheet.totSTR) or 1;
						Att.AGI = tonumber(sheet.totAGI) or 1;
						Att.VIT = tonumber(sheet.totVIT) or 1;
						Att.SPD = tonumber(sheet.totSPD) or 1;
						Att.MAG = tonumber(sheet.totMAG) or 1;
						Att.SPR = tonumber(sheet.totSPR) or 1;
						local AttSec = {}
						AttSec.PRECP = tonumber(sheet.valACC) or 0;
						AttSec.PRECM = tonumber(sheet.valMACC) or 0;
						AttSec.DEXTE = tonumber(sheet.valDEX) or 0;
						AttSec.MIND = tonumber(sheet.valMND) or 0;
						AttSec.EXPER = tonumber(sheet.valEXP) or 0;

						local DADOARMD = sheet.eqARMDdado or "1d1"
						local ARMDATRIB = tonumber(sheet.eqARMDatrib) or 1;		
						local ARMDMULT = tonumber(sheet.eqARMDmult) or 1;			
						local MultD = 0;
						local DADOARME = sheet.eqARMEdado or "1d1"
						local ARMEATRIB = tonumber(sheet.eqARMEatrib) or 1;		
						local ARMEMULT = tonumber(sheet.eqARMEmult) or 1;	
						local MultE = 0;
						local DADOGOLPE = self.boxDetalhesDoItem.node.dadoGolpe or "1d1"
						local GOLPEATRIB = tonumber(self.boxDetalhesDoItem.node.atribGolpe) or 0;
						local GOLPEMULT = tonumber(self.boxDetalhesDoItem.node.multGolpe) or 1
						local MultG = 0;
						local DAMAGELIM = self.boxDetalhesDoItem.node.activeBDM or false			
						if (ARMDATRIB == 1) then			
							MultD = (ARMDMULT)*(STR) or 0	
							elseif (ARMDATRIB == 2) then	
								MultD = (ARMDMULT)*(AGI) or 0	
							elseif (ARMDATRIB == 3) then	
								MultD = (ARMDMULT)*(MAG) or 0	
							end			
						if (ARMEATRIB == 1) then			
							MultE = (ARMEMULT)*(STR) or 0	
							elseif (ARMEATRIB == 2) then	
								MultE = (ARMEMULT)*(AGI) or 0	
							elseif (ARMEATRIB == 3) then	
								MultE = (ARMEMULT)*(MAG) or 0	
							end			
						if (GOLPEATRIB == 1) then			
							MultG = (GOLPEMULT)*(STR) or 1	
							elseif (GOLPEATRIB == 2) then	
								MultG = (GOLPEMULT)*(AGI) or 1	
							elseif (GOLPEATRIB == 3) then	
								MultG = (GOLPEMULT)*(MAG) or 1	
							end	
						local ARMA1 = Firecast.interpretarRolagem(DADOARMD);
							  ARMA1:concatenar(MultD);
						local ARMA2 = Firecast.interpretarRolagem(DADOARME);
							  ARMA2:concatenar(MultE);
						local DANOG = Firecast.interpretarRolagem(DADOGOLPE);
							  DANOG:concatenar(MultG);
						local enemies = {};
						setTarget(enemies, 11, "nameEnemy");
						local alliesA = {};
						setTarget(alliesA, 11, "nameAlly");	
						local selectEnemy = {};
						setSelect(selectEnemy, 11, "ValidTarget");
						local selectAllyG = {};
						setSelect(selectAllyG, 11, "ValidAllyG");		
						
						local mobs = {};
						for i = 1, 11, 1 do
							if (i == 1 and enemies[1] ~= "" and selectEnemy[1] == true) then 
								table.insert(mobs, enemies[1]); 
								end;
							if (i == 2 and enemies[2] ~= "" and selectEnemy[2] == true) then 
								table.insert(mobs, enemies[2]); 
								end;
							if (i == 3 and enemies[3] ~= "" and selectEnemy[3] == true) then 
								table.insert(mobs, enemies[3]); 
								end;
							if (i == 4 and enemies[4] ~= "" and selectEnemy[4] == true) then 
								table.insert(mobs, enemies[4]); 
								end;
							if (i == 5 and enemies[5] ~= "" and selectEnemy[5] == true) then 
								table.insert(mobs, enemies[5]); 
								end;
							if (i == 6 and enemies[6] ~= "" and selectEnemy[6] == true) then 
								table.insert(mobs, enemies[6]); 
								end;
							if (i == 7 and enemies[7] ~= "" and selectEnemy[7] == true) then 
								table.insert(mobs, enemies[7]); 
								end;
							if (i == 8 and enemies[8] ~= "" and selectEnemy[8] == true) then 
								table.insert(mobs, enemies[8]); 
								end;
							if (i == 9 and enemies[9] ~= "" and selectEnemy[9] == true) then 
								table.insert(mobs, enemies[9]); 
								end;
							if (i == 10 and enemies[10] ~= "" and selectEnemy[10] == true) then 
								table.insert(mobs, enemies[10]); 
								end;
							if (i == 11 and enemies[11] ~= "" and selectEnemy[11] == true) then 
								table.insert(mobs, enemies[11]); 
								end;
							end;
						local allies = {};
						for i = 1, 11, 1 do
							if (i == 1 and alliesA[1] ~= "" and selectAllyG[1] == true) then 
								table.insert(allies, alliesA[1]); 
								end;
							if (i == 2 and alliesA[2] ~= "" and selectAllyG[2] == true) then 
								table.insert(allies, alliesA[2]); 
								end;
							if (i == 3 and alliesA[3] ~= "" and selectAllyG[3] == true) then 
								table.insert(allies, alliesA[3]); 
								end;
							if (i == 4 and alliesA[4] ~= "" and selectAllyG[4] == true) then 
								table.insert(allies, alliesA[4]); 
								end;
							if (i == 5 and alliesA[5] ~= "" and selectAllyG[5] == true) then 
								table.insert(allies, alliesA[5]); 
								end;
							if (i == 6 and alliesA[6] ~= "" and selectAllyG[6] == true) then 
								table.insert(allies, alliesA[6]); 
								end;
							if (i == 7 and alliesA[7] ~= "" and selectAllyG[7] == true) then 
								table.insert(allies, alliesA[7]); 
								end;
							if (i == 8 and alliesA[8] ~= "" and selectAllyG[8] == true) then 
								table.insert(allies, alliesA[8]); 
								end;
							if (i == 9 and alliesA[9] ~= "" and selectAllyG[9] == true) then 
								table.insert(allies, alliesA[9]); 
								end;
							if (i == 10 and alliesA[10] ~= "" and selectAllyG[10] == true) then 
								table.insert(allies, alliesA[10]); 
								end;
							if (i == 11 and alliesA[11] ~= "" and selectAllyG[11] == true) then 
								table.insert(allies, alliesA[11]); 
								end;
						end;
						local all = {};
						for i = 1, 22, 1 do
							if (i == 1 and enemies[1] ~= "") then 
								table.insert(all, enemies[1]); 
								end;
							if (i == 2 and enemies[2] ~= "") then 
								table.insert(all, enemies[2]); 
								end;
							if (i == 3 and enemies[3] ~= "") then 
								table.insert(all, enemies[3]); 
								end;
							if (i == 4 and enemies[4] ~= "") then 
								table.insert(all, enemies[4]); 
								end;
							if (i == 5 and enemies[5] ~= "") then 
								table.insert(all, enemies[5]); 
								end;
							if (i == 6 and enemies[6] ~= "") then 
								table.insert(all, enemies[6]); 
								end;
							if (i == 7 and enemies[7] ~= "") then 
								table.insert(all, enemies[7]); 
								end;
							if (i == 8 and enemies[8] ~= "") then 
								table.insert(all, enemies[8]); 
								end;
							if (i == 9 and enemies[9] ~= "") then 
								table.insert(all, enemies[9]); 
								end;
							if (i == 10 and enemies[10] ~= "") then 
								table.insert(all, enemies[10]); 
								end;
							if (i == 11 and enemies[11] ~= "") then 
								table.insert(all, enemies[11]); 
								end;
							if (i == 12 and alliesA[1] ~= "") then 
								table.insert(all, alliesA[1]); 
								end;
							if (i == 13 and alliesA[2] ~= "") then 
								table.insert(all, alliesA[2]); 
								end;
							if (i == 14 and alliesA[3] ~= "") then 
								table.insert(all, alliesA[3]); 
								end;
							if (i == 15 and alliesA[4] ~= "") then 
								table.insert(all, alliesA[4]); 
								end;
							if (i == 16 and alliesA[5] ~= "") then 
								table.insert(all, alliesA[5]); 
								end;
							if (i == 17 and alliesA[6] ~= "") then 
								table.insert(all, alliesA[6]); 
								end;
							if (i == 18 and alliesA[7] ~= "") then 
								table.insert(all, alliesA[7]); 
								end;
							if (i == 19 and alliesA[8] ~= "") then 
								table.insert(all, alliesA[8]); 
								end;
							if (i == 20 and alliesA[9] ~= "") then 
								table.insert(all, alliesA[9]); 
								end;
							if (i == 21 and alliesA[10] ~= "") then 
								table.insert(all, alliesA[10]); 
								end;
							if (i == 22 and alliesA[11] ~= "") then 
								table.insert(all, alliesA[11]); 
								end;
							end;
						local SUBEVA = tonumber(self.boxDetalhesDoItem.node.fieldSubEVA) or 1
						local MSG_SubEVA = ""
							if (SUBEVA == 1) then 
								MSG_SubEVA = "[-EVA]"
								elseif (SUBEVA == 2) then 
									MSG_SubEVA = "[-EVAM]"
								elseif (SUBEVA == 3) then 
									MSG_SubEVA = "[-EVA/2]"	
								end
						local SUBDEF = tonumber(self.boxDetalhesDoItem.node.fieldSubDEF) or 1
						local MSG_SubDEF = ""
							if (SUBDEF == 1) then 
								MSG_SubDEF = "[-ARM]"
								elseif (SUBDEF == 2) then 
									MSG_SubDEF = "[-ARMM]"
								elseif (SUBDEF == 3) then 
									MSG_SubDEF = "[-ARM/2]"
								elseif (SUBDEF == 4) then 
									MSG_SubDEF = "[-ARM/2]"	
								end
						local ELDANO = tonumber(self.boxDetalhesDoItem.node.catTipo) or 1
						MSG_DanType ="";
						MSG_corGolpe ="";
						if (ELDANO == 1) then 
							MSG_DanType = " Não-Elemental";
							MSG_corGolpe ="[§K14]";	
							elseif (ELDANO == 2) then 
								MSG_DanType = " Arcano";		
								MSG_corGolpe ="[§K14]";	
							elseif (ELDANO == 3) then 
								MSG_DanType = " Fogo";			
								MSG_corGolpe ="[§K4]";	
							elseif (ELDANO == 4) then 
								MSG_DanType = " Gelo";				
								MSG_corGolpe ="[§K10]";	
							elseif (ELDANO == 5) then 
								MSG_DanType = " Água";			
								MSG_corGolpe ="[§K12]";	
							elseif (ELDANO == 6) then 
								MSG_DanType = " Eletricidade"		
								MSG_corGolpe ="[§K8]";
							elseif (ELDANO == 7) then 
								MSG_DanType = " Terra"			
								MSG_corGolpe ="[§K7]";
							elseif (ELDANO == 8) then 
								MSG_DanType = " Vento"	
								MSG_corGolpe ="[§K9]";
							elseif (ELDANO == 9) then 
								MSG_DanType = " Bio"				
								MSG_corGolpe ="[§K13]";
							elseif (ELDANO == 10) then 
								MSG_DanType = " Trevas"			
								MSG_corGolpe ="[§K14]";	
							elseif (ELDANO == 11) then 
								MSG_DanType = " Sagrado"			
								MSG_corGolpe ="[§K1]";
							elseif (ELDANO == 12) then 
								MSG_DanType = " Recuperação"		
								MSG_corGolpe ="[§K3]";	
							end
						MSG_CMP = "";
						if (CMP > 0) then 
							MSG_CMP = "(" .. CMP .. " MP)[§K14]; "	
							end
						local DANMULT = tonumber(self.boxDetalhesDoItem.node.PAtkField) or 1;
						if (DANMULT == 0.25) then 
							MSG_DM = "(25%)"
							elseif (DANMULT == 0.50) then 
								MSG_DM = "(50%)"
							elseif (DANMULT == 0.75) then 
								MSG_DM = "(75%)"
							elseif (DANMULT == 1) then 
								MSG_DM = "(100%)"
							elseif (DANMULT == 1.25) then 
								MSG_DM = "(125%)"
							elseif (DANMULT == 1.50) then 
								MSG_DM = "(150%)"
							elseif (DANMULT == 1.75) then 
								MSG_DM = "(175%)"
							elseif (DANMULT == 2.00) then 
								MSG_DM = "(200%)"
							elseif (DANMULT == 2.25) then 
								MSG_DM = "(225%)"
							elseif (DANMULT == 2.50) then 
								MSG_DM = "(250%)"
							elseif (DANMULT == 2.75) then 
								MSG_DM = "(275%)"
							elseif (DANMULT == 3.00) then 
								MSG_DM = "(300%)"
							elseif (DANMULT == 3.25) then 
								MSG_DM = "(325%)"
							elseif (DANMULT == 3.50) then 
								MSG_DM = "(350%)"
							elseif (DANMULT == 3.75) then 
								MSG_DM = "(375%)"
							elseif (DANMULT == 4.00) then 
								MSG_DM = "(400%)"
							elseif (DANMULT == 4.25) then 
								MSG_DM = "(425%)"
							elseif (DANMULT == 4.50) then 
								MSG_DM = "(450%)"	
							end
						local MarCRIT = tonumber(self.boxDetalhesDoItem.node.campoMargem) or 0;
						local TriplCRIT = self.boxDetalhesDoItem.node.activeTripleCrit or false
						local AmmoON = self.boxDetalhesDoItem.node.checkAmmo or false
						local NOME_Ammo = self.boxDetalhesDoItem.node.campoAmmo or ""
						MSG_Ammo = ""
						if (AmmoON == true) then 
							MSG_Ammo = ("([§B]Munição Especial:[§B] " .. NOME_Ammo .. "); ")	
							end
						local actStatus1 = self.boxDetalhesDoItem.node.activeStatus1 or false
						local actStatus2 = self.boxDetalhesDoItem.node.activeStatus2 or false
						local actStatus3 = self.boxDetalhesDoItem.node.activeStatus3 or false
						local actStatus4 = self.boxDetalhesDoItem.node.activeStatus4 or false
						local actStatus5 = self.boxDetalhesDoItem.node.activeStatus5 or false
						local actStatus6 = self.boxDetalhesDoItem.node.activeStatus6 or false
						local MSG_Status1="";
						local MSG_Status2="";
						local MSG_Status3="";
						local MSG_Status4="";
						local MSG_Status5="";
						local MSG_Status6="";
						local Status1 = tonumber(self.boxDetalhesDoItem.node.sourceStatus1) or 1
						local rolagemStatus1;
						local NomeStatus1 = self.boxDetalhesDoItem.node.nameStatus1 or "Status"
						local SubStatus1 = tonumber(self.boxDetalhesDoItem.node.reduceStatus1) or 3
						MSG_SubStatus1 = "";
						if SubStatus1 == 1 then 
							MSG_SubStatus1 = "[-EVA]" 
							end
						if SubStatus1 == 2 then 
							MSG_SubStatus1 = "[-EVAM]" 
							end			
						local Status2 = tonumber(self.boxDetalhesDoItem.node.sourceStatus2) or 1
						local rolagemStatus2;
						local NomeStatus2 = self.boxDetalhesDoItem.node.nameStatus2 or "Status"
						local SubStatus2 = tonumber(self.boxDetalhesDoItem.node.reduceStatus2) or 3
						MSG_SubStatus2 = "";
						if SubStatus2 == 1 then 
							MSG_SubStatus2 = "[-EVA]" 
							end
						if SubStatus2 == 2 then 
							MSG_SubStatus2 = "[-EVAM]" 
							end
						local Status3 = tonumber(self.boxDetalhesDoItem.node.sourceStatus3) or 1
						local rolagemStatus3;
						local NomeStatus3 = self.boxDetalhesDoItem.node.nameStatus3 or "Status"
						local SubStatus3 = tonumber(self.boxDetalhesDoItem.node.reduceStatus3) or 3
						MSG_SubStatus3 = "";
						if SubStatus3 == 1 then 
							MSG_SubStatus3 = "[-EVA]" 
							end
						if SubStatus3 == 2 then 
							MSG_SubStatus3 = "[-EVAM]" 
							end			
						local Status4 = tonumber(self.boxDetalhesDoItem.node.sourceStatus4) or 1
						local rolagemStatus4;
						local NomeStatus4 = self.boxDetalhesDoItem.node.nameStatus4 or "Status"
						local SubStatus4 = tonumber(self.boxDetalhesDoItem.node.reduceStatus4) or 3
						MSG_SubStatus4 = "";
						if SubStatus4 == 1 then 
							MSG_SubStatus4 = "[-EVA]" 
							end
						if SubStatus4 == 2 then 
							MSG_SubStatus4 = "[-EVAM]" 
							end		
						local Status5 = tonumber(self.boxDetalhesDoItem.node.sourceStatus5) or 1
						local rolagemStatus5;
						local NomeStatus5 = self.boxDetalhesDoItem.node.nameStatus5 or "Status"
						local SubStatus5 = tonumber(self.boxDetalhesDoItem.node.reduceStatus5) or 3
						MSG_SubStatus5 = "";
						if SubStatus5 == 1 then 
							MSG_SubStatus5 = "[-EVA]" 
							end
						if SubStatus5 == 2 then 
							MSG_SubStatus5 = "[-EVAM]" 
							end		
						local Status6 = tonumber(self.boxDetalhesDoItem.node.sourceStatus6) or 1
						local rolagemStatus6;
						local NomeStatus6 = self.boxDetalhesDoItem.node.nameStatus6 or "Status"
						local SubStatus6 = tonumber(self.boxDetalhesDoItem.node.reduceStatus6) or 3
						MSG_SubStatus6 = "";
						if SubStatus6 == 1 then 
							MSG_SubStatus6 = "[-EVA]" 
							end
						if SubStatus6 == 2 then 
							MSG_SubStatus6 = "[-EVAM]" 
							end
						local Rstatus = {};
						local STATRANDOM = self.boxDetalhesDoItem.node.activeSRANDOM or false
						for i = 1, 6, 1 do
							if (i == 1 and NomeStatus1 ~= "" and actStatus1 == true) then 
								table.insert(Rstatus, NomeStatus1); 
								end;
							if (i == 2 and NomeStatus2 ~= "" and actStatus2 == true) then 
								table.insert(Rstatus, NomeStatus2); 
								end;
							if (i == 3 and NomeStatus3 ~= "" and actStatus3 == true) then 
								table.insert(Rstatus, NomeStatus3); 
								end;
							if (i == 4 and NomeStatus4 ~= "" and actStatus4 == true) then 
								table.insert(Rstatus, NomeStatus4); 
								end;
							if (i == 5 and NomeStatus5 ~= "" and actStatus5 == true) then 
								table.insert(Rstatus, NomeStatus5); 
								end;
							if (i == 6 and NomeStatus6 ~= "" and actStatus6 == true) then 
								table.insert(Rstatus, NomeStatus6); 
								end;
						end;
							
						ALVO = tonumber(self.boxDetalhesDoItem.node.catAlvo) or 1;
						if (ALVO == 1) then
							local MSG_TARGET = "";
							local AlvoSelect = tonumber(sheet.singleGB) or 1;
							if (AlvoSelect == 1) then 
								MSG_TARGET = ("[§B]Alvo:[§B] " .. enemies[1] .. "; ")
								elseif (AlvoSelect == 2) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. enemies[2] .. "; ")
								elseif (AlvoSelect == 3) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. enemies[3] .. "; ")
								elseif (AlvoSelect == 4) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. enemies[4] .. "; ")
								elseif (AlvoSelect == 5) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. enemies[5] .. "; ")
								elseif (AlvoSelect == 6) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. enemies[6] .. "; ")
								elseif (AlvoSelect == 7) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. enemies[7] .. "; ")
								elseif (AlvoSelect == 8) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. enemies[8] .. "; ")
								elseif (AlvoSelect == 9) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. enemies[9] .. "; ")
								elseif (AlvoSelect == 10) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. enemies[10] .. "; ")
								elseif (AlvoSelect == 11) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. enemies[11] .. "; ")	
								end
							if (REPEAT >= 2) then	
								mesa.activeChat:enviarMensagem(MSG_corGolpe .. NOME .. MSG_Ammo .. MSG_CMP .. MSG_TARGET)
								end
							for i = 1, REPEAT, 1 do
								bonCRIT = 0;
								MSG_CRIT= "";											
								if ((STATRANDOM) == true) and (#Rstatus > 0) then
									local ACTIVESTAT = tonumber(math.random(1,#Rstatus));	
									MSG_Status1=""		
									MSG_Status2=""	
									MSG_Status3=""	
									MSG_Status4=""	
									MSG_Status5=""	
									MSG_Status6=""						
									actStatus1 = false;
									actStatus2 = false;
									actStatus3 = false;
									actStatus4 = false;
									actStatus5 = false;
									actStatus6 = false;									
									if tonumber(ACTIVESTAT) == 1 then 
										actStatus1 = true;
									elseif tonumber(ACTIVESTAT) == 2 then 
										actStatus2 = true;
									elseif tonumber(ACTIVESTAT) == 3 then 
										actStatus3 = true;
									elseif tonumber(ACTIVESTAT) == 4 then 
										actStatus4 = true;
									elseif tonumber(ACTIVESTAT) == 5 then 
										actStatus5 = true;
									elseif tonumber(ACTIVESTAT) == 6 then 
										actStatus6 = true;
										end	
									end	
								local ACERTO = tonumber(self.boxDetalhesDoItem.node.catAcerto) or 1;
								local DadoAcerto = math.random(1,100);
								if (MarCRIT >= 1) then
									if (MarCRIT >= DadoAcerto) then 
										bonCRIT=1;	
										MSG_CRIT = ("[§K9](CRIT)" .. MSG_corGolpe)	
										end
									if (TriplCRIT == true) then 
										bonCRIT=2; 
										MSG_CRIT = ("[§K9](3xCRIT)" .. MSG_corGolpe)
										end
									end
								local rolagemAcerto = 0;
								if (ACERTO == 1) then	
									rolagemAcerto = PRECP - DadoAcerto;		
									elseif (ACERTO == 2) then	
										rolagemAcerto = PRECM - DadoAcerto;
									elseif (ACERTO == 4) then	
										rolagemAcerto = math.floor((PRECP - DadoAcerto)/2);	
									end				
								MSG_ACERTO = "[§B]Acerto:[§B] " .. rolagemAcerto .. MSG_SubEVA .. "[" .. DadoAcerto .. "]; "
								if (ACERTO == 3) then 
									MSG_ACERTO = "[§B]Acerto:[§B] Auto [" .. DadoAcerto .. "]; "	
									end
								local TIPODANO = tonumber(self.boxDetalhesDoItem.node.AtkTypeF or 1)
								local DanoCALC = 0;
								if (TIPODANO == 3) then
									ARMA1:rolarLocalmente()		
									DanoCALC = ARMA1.resultado	
									elseif (TIPODANO == 4) then
										ARMA2:rolarLocalmente()		
										DanoCALC = ARMA2.resultado
									elseif (TIPODANO == 2) then
										DANOG:rolarLocalmente()		
										DanoCALC = DANOG.resultado	
									end
								DANFINAL = math.floor((DANMULT+bonCRIT)*DanoCALC)
									if (DANFINAL >= 999 and DAMAGELIM == false) then 
										DANFINAL = 999 	
										end;
								DANWEAK = math.floor((DANMULT+bonCRIT+0.5)*DanoCALC)
								if (DANWEAK >= 999 and DAMAGELIM == false) then 
									DANWEAK = 999 	
									end;
								DAN75 = math.floor((DANMULT+bonCRIT-0.25)*DanoCALC)
								if (DAN75 >= 999 and DAMAGELIM == false) then 
									DAN75 = 999 	
									end;
								DAN125 = math.floor((DANMULT+bonCRIT+0.25)*DanoCALC)
								if (DAN125 >= 999 and DAMAGELIM == false) then 
									DAN125 = 999 	
									end;
								if (2 >= ELDANO) then
									MSG_DANO = ("[§B]Dano: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_CRIT .. MSG_DM .. MSG_SubDEF .. MSG_DanType .. "[§K14]; ")
									elseif (ELDANO >= 3 and 11 >= ELDANO) then
										MSG_DANO = ("[§B]Dano: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_CRIT .. MSG_DM .. MSG_SubDEF .. MSG_DanType .. "[§K14]; [§B]Vs Weak: [§B]" .. MSG_corGolpe .. DANWEAK .. "[§K14]; ")
									elseif (ELDANO == 12) then
										MSG_DANO = ("[§B]Restaura: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_DM .. "[§K14]; [§B][§K4]-25%:[§K14] " .. DAN75 .. "[§K14]; [§B][§K9]+25%:[§K14] " .. DAN125 )
									end	
								if (TIPODANO == 1) then
									MSG_DANO ="";
									end
								if (actStatus1 == true) then
									local DadoStatus1 = math.random(1,100);
									rolagemStatus1 = getRollStatus(Status1, DadoStatus1, PRECM, DEXTE, MIND, EXPER);				
									if (5 >= Status1) then 					
										MSG_Status1 = "CdS de [§B]" .. NomeStatus1 .. "[§B]: " .. rolagemStatus1 .. MSG_SubStatus1 .. " (" .. DadoStatus1 .. "); ";
										elseif (Status1 >= 6 and 8 >= Status1) then 
											MSG_Status1 = "CdS% de [§B]" .. NomeStatus1 .. "[§B]: " .. rolagemStatus1 .. " (" .. DadoStatus1 .. "); ";
										elseif (Status1 == 9) then 					
											MSG_Status1 = "CdS de [§B]" .. NomeStatus1 .. "[§B]: Auto (" .. DadoStatus1 .. "); ";
										end	
									end							
								if (actStatus2 == true) then
									local DadoStatus2 = math.random(1,100);
									rolagemStatus2 = getRollStatus(Status2, DadoStatus2, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status2) then 					
										MSG_Status2 = "CdS de [§B]" .. NomeStatus2 .. "[§B]: " .. rolagemStatus2 .. MSG_SubStatus2 .. " (" .. DadoStatus2 .. "); ";
										elseif (Status2 >= 6 and 8 >= Status2) then 
											MSG_Status2 = "CdS% de [§B]" .. NomeStatus2 .. "[§B]: " .. rolagemStatus2 .. " (" .. DadoStatus2 .. "); ";
										elseif (Status2 == 9) then 					
											MSG_Status2 = "CdS de [§B]" .. NomeStatus2 .. "[§B]: Auto (" .. DadoStatus2 .. "); ";
										end
									end		
								if (actStatus3 == true) then
									local DadoStatus3 = math.random(1,100);
									rolagemStatus3 = getRollStatus(Status3, DadoStatus3, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status3) then 					
										MSG_Status3 = "CdS de [§B]" .. NomeStatus3 .. "[§B]: " .. rolagemStatus3 .. MSG_SubStatus3 .. " (" .. DadoStatus3 .. "); ";
										elseif (Status3 >= 6 and 8 >= Status3) then 
											MSG_Status3 = "CdS% de [§B]" .. NomeStatus3 .. "[§B]: " .. rolagemStatus3 .. " (" .. DadoStatus3 .. "); ";
										elseif (Status3 == 9) then 					
											MSG_Status3 = "CdS de [§B]" .. NomeStatus3 .. "[§B]: Auto (" .. DadoStatus3 .. "); ";
										end
									end	
								if (actStatus4 == true) then
									local DadoStatus4 = math.random(1,100);
									rolagemStatus4 = getRollStatus(Status4, DadoStatus4, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status4) then 					
										MSG_Status4 = "CdS de [§B]" .. NomeStatus4 .. "[§B]: " .. rolagemStatus4 .. MSG_SubStatus4 .. " (" .. DadoStatus4 .. ");";
										elseif (Status4 >= 6 and 8 >= Status4) then 
											MSG_Status4 = "CdS% de [§B]" .. NomeStatus4 .. "[§B]: " .. rolagemStatus4 .. " (" .. DadoStatus4 .. ");";
										elseif (Status4 == 9) then 					
											MSG_Status4 = "CdS de [§B]" .. NomeStatus4 .. "[§B]: Auto (" .. DadoStatus4 .. ");";
										end
									end		
								if (actStatus5 == true) then
									local DadoStatus5 = math.random(1,100);
									rolagemStatus5 = getRollStatus(Status5, DadoStatus5, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status5) then 					
										MSG_Status5 = "CdS de [§B]" .. NomeStatus5 .. "[§B]: " .. rolagemStatus5 .. MSG_SubStatus5 .. " (" .. DadoStatus5 .. ");";
										elseif (Status5 >= 6 and 8 >= Status5) then 
											MSG_Status5 = "CdS% de [§B]" .. NomeStatus5 .. "[§B]: " .. rolagemStatus5 .. " (" .. DadoStatus5 .. ");";
										elseif (Status5 == 9) then 					
											MSG_Status5 = "CdS de [§B]" .. NomeStatus5 .. "[§B]: Auto (" .. DadoStatus5 .. ");";
										end
									end		
								if (actStatus6 == true) then
									local DadoStatus6 = math.random(1,100);
									rolagemStatus6 = getRollStatus(Status6, DadoStatus6, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status6) then 					
										MSG_Status6 = "CdS de [§B]" .. NomeStatus6 .. "[§B]: " .. rolagemStatus6 .. MSG_SubStatus6 .. " (" .. DadoStatus6 .. ");";
										elseif (Status6 >= 6 and 8 >= Status6) then 
											MSG_Status6 = "CdS% de [§B]" .. NomeStatus6 .. "[§B]: " .. rolagemStatus6 .. " (" .. DadoStatus6 .. ");";
										elseif (Status6 == 9) then 					
											MSG_Status6 = "CdS de [§B]" .. NomeStatus6 .. "[§B]: Auto (" .. DadoStatus6 .. ");";
										end
									end		
								if (REPEAT == 1) then
									mesa.activeChat:enviarMensagem(MSG_corGolpe .. NOME .. MSG_Ammo .. MSG_CMP .. MSG_TARGET .. MSG_ACERTO .. MSG_DANO .. MSG_Status1 .. MSG_Status2 .. MSG_Status3 .. MSG_Status4 .. MSG_Status5 .. MSG_Status6)
									end
								if (REPEAT >= 2) then	
									mesa.activeChat:enviarMensagem("[§K14]#" .. i .. "; " .. MSG_ACERTO .. MSG_DANO .. MSG_Status1 .. MSG_Status2 .. MSG_Status3 .. MSG_Status4 .. MSG_Status5 .. MSG_Status6)
									end		
								end
							end

						if (ALVO == 2) then
							local MSG_TARGET = ""
							local AlvoSelect = tonumber(self.boxDetalhesDoItem.node.singleAllyB) or 1;
							if (AlvoSelect == 1) then 
								MSG_TARGET = ("[§B]Alvo:[§B] " .. alliesA[1] .. "; ")
								elseif (AlvoSelect == 2) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. alliesA[2] .. "; ")	
								elseif (AlvoSelect == 3) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. alliesA[3] .. "; ")	
								elseif (AlvoSelect == 4) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. alliesA[4] .. "; ")	
								elseif (AlvoSelect == 5) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. alliesA[5] .. "; ")	
								elseif (AlvoSelect == 6) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. alliesA[6] .. "; ")	
								elseif (AlvoSelect == 7) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. alliesA[7] .. "; ")	
								elseif (AlvoSelect == 8) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. alliesA[8] .. "; ")	
								elseif (AlvoSelect == 9) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. alliesA[9] .. "; ")	
								elseif (AlvoSelect == 10) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. alliesA[10] .. "; ")	
								elseif (AlvoSelect == 11) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. alliesA[11] .. "; ")	
								end
							if (REPEAT >= 2) then	
								mesa.activeChat:enviarMensagem(MSG_corGolpe .. NOME .. MSG_Ammo .. MSG_CMP .. MSG_TARGET)
								end
							for i = 1, REPEAT, 1 do
								bonCRIT = 0;
								MSG_CRIT= "";	
								if ((STATRANDOM) == true) and (#Rstatus > 0) then
									local ACTIVESTAT = tonumber(math.random(1,#Rstatus));	
									MSG_Status1=""		
									MSG_Status2=""	
									MSG_Status3=""	
									MSG_Status4=""	
									MSG_Status5=""	
									MSG_Status6=""						
									actStatus1 = false;
									actStatus2 = false;
									actStatus3 = false;
									actStatus4 = false;
									actStatus5 = false;
									actStatus6 = false;									
									if tonumber(ACTIVESTAT) == 1 then 
										actStatus1 = true;
									elseif tonumber(ACTIVESTAT) == 2 then 
										actStatus2 = true;
									elseif tonumber(ACTIVESTAT) == 3 then 
										actStatus3 = true;
									elseif tonumber(ACTIVESTAT) == 4 then 
										actStatus4 = true;
									elseif tonumber(ACTIVESTAT) == 5 then 
										actStatus5 = true;
									elseif tonumber(ACTIVESTAT) == 6 then 
										actStatus6 = true;
										end	
									end									
								local ACERTO = tonumber(self.boxDetalhesDoItem.node.catAcerto) or 1;
								local DadoAcerto = math.random(1,100);
								if (MarCRIT >= 1) then
									if (MarCRIT >= DadoAcerto) then 
										bonCRIT=1;	
										MSG_CRIT = ("[§K9](CRIT)" .. MSG_corGolpe)	
										end
									if (TriplCRIT == true) then 
										bonCRIT=2; 
										MSG_CRIT = ("[§K9](3xCRIT)" .. MSG_corGolpe)end
										end
								local rolagemAcerto = 0;
								if (ACERTO == 1) then	
									rolagemAcerto = PRECP - DadoAcerto;		
									elseif (ACERTO == 2) then	
										rolagemAcerto = PRECM - DadoAcerto;
									elseif (ACERTO == 4) then	
										rolagemAcerto = math.floor((PRECP - DadoAcerto)/2);	
									end				
								MSG_ACERTO = "[§B]Acerto:[§B] " .. rolagemAcerto .. MSG_SubEVA .. "[" .. DadoAcerto .. "]; "
								if (ACERTO == 3) then 
									MSG_ACERTO = "[§B]Acerto:[§B] Auto [" .. DadoAcerto .. "]; "	
									end
								local TIPODANO = tonumber(self.boxDetalhesDoItem.node.AtkTypeF or 1)
								local DanoCALC = 0;
								if (TIPODANO == 3) then
									ARMA1:rolarLocalmente()		
									DanoCALC = ARMA1.resultado	
									elseif (TIPODANO == 4) then
										ARMA2:rolarLocalmente()		
										DanoCALC = ARMA2.resultado
									elseif (TIPODANO == 2) then
										DANOG:rolarLocalmente()		
										DanoCALC = DANOG.resultado	
									end
								DANFINAL = math.floor((DANMULT+bonCRIT)*DanoCALC)
								if (DANFINAL >= 999 and DAMAGELIM == false) then 
									DANFINAL = 999 	
									end;
								DANWEAK = math.floor((DANMULT+bonCRIT+0.5)*DanoCALC)
									if (DANWEAK >= 999 and DAMAGELIM == false) then 
									DANWEAK = 999 	
									end;
								DAN75 = math.floor((DANMULT+bonCRIT-0.25)*DanoCALC)
									if (DAN75 >= 999 and DAMAGELIM == false) then 
									DAN75 = 999 	
									end;
								DAN125 = math.floor((DANMULT+bonCRIT+0.25)*DanoCALC)
									if (DAN125 >= 999 and DAMAGELIM == false) then 
									DAN125 = 999 	
									end;
								if (2 >= ELDANO) then
									MSG_DANO = ("[§B]Dano: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_CRIT .. MSG_DM .. MSG_SubDEF .. MSG_DanType .. "[§K14]; ")
									elseif (ELDANO >= 3 and 11 >= ELDANO) then
										MSG_DANO = ("[§B]Dano: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_CRIT .. MSG_DM .. MSG_SubDEF .. MSG_DanType .. "[§K14]; [§B]Vs Weak: [§B]" .. MSG_corGolpe .. DANWEAK .. "[§K14]; ")
									elseif (ELDANO == 12) then
										MSG_DANO = ("[§B]Restaura: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_DM .. "[§K14]; [§B][§K4]-25%:[§K14] " .. DAN75 .. "[§K14]; [§B][§K9]+25%:[§K14] " .. DAN125 )
									end					
								if (TIPODANO == 1) then
									MSG_DANO ="";
									end
								if (actStatus1 == true) then
									MSG_Status1 = ("Recebe [§B]" .. NomeStatus1 .. "[§B]; ");
									end							
								if (actStatus2 == true) then
									MSG_Status2 = ("Recebe [§B]" .. NomeStatus2 .. "[§B]; ");
									end	
								if (actStatus3 == true) then
									MSG_Status3 = ("Recebe [§B]" .. NomeStatus3 .. "[§B]; ");
									end	
								if (actStatus4 == true) then
									MSG_Status4 = ("Recebe [§B]" .. NomeStatus4 .. "[§B]; ");
									end	
								if (actStatus5 == true) then
									MSG_Status5 = ("Recebe [§B]" .. NomeStatus5 .. "[§B]; ");
									end	
								if (actStatus6 == true) then
									MSG_Status6 = ("Recebe [§B]" .. NomeStatus6 .. "[§B]; ");
									end		
								if (REPEAT == 1) then
									mesa.activeChat:enviarMensagem(MSG_corGolpe .. NOME .. MSG_Ammo .. MSG_CMP .. MSG_TARGET .. MSG_ACERTO .. MSG_DANO .. MSG_Status1 .. MSG_Status2 .. MSG_Status3 .. MSG_Status4 .. MSG_Status5 .. MSG_Status6)
									elseif (REPEAT >= 2) then	
										mesa.activeChat:enviarMensagem("[§K14]#" .. i .. "; " .. MSG_ACERTO .. MSG_DANO .. MSG_Status1 .. MSG_Status2 .. MSG_Status3 .. MSG_Status4 .. MSG_Status5 .. MSG_Status6)
									end		
								end
							end

						if (ALVO == 3) then
							local bonCRIT = 0;
							local MSG_CRIT = "";
							local MSG_TARGET = ""
							if (REPEAT >= 2) then	
								mesa.activeChat:enviarMensagem(MSG_corGolpe .. NOME .. MSG_Ammo .. MSG_CMP .. MSG_TARGET)
								end
							for i = 1, REPEAT, 1 do
							local m = math.random(1,#mobs);
								if (m == 1) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[m] .. "; ")	
									elseif (m == 2) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[m] .. "; ")	
									elseif (m == 3) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[m] .. "; ")	
									elseif (m == 4) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[m] .. "; ")	
									elseif (m == 5) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[m] .. "; ")	
									elseif (m == 6) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[m] .. "; ")	
									elseif (m == 7) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[m] .. "; ")	
									elseif (m == 8) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[m] .. "; ")	
									elseif (m == 9) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[m] .. "; ")	
									elseif (m == 10) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[m] .. "; ")	
									elseif (m == 11) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[m] .. "; ")	
									end
								if ((STATRANDOM) == true) and (#Rstatus > 0) then
									local ACTIVESTAT = tonumber(math.random(1,#Rstatus));	
									MSG_Status1=""		
									MSG_Status2=""	
									MSG_Status3=""	
									MSG_Status4=""	
									MSG_Status5=""	
									MSG_Status6=""						
									actStatus1 = false;
									actStatus2 = false;
									actStatus3 = false;
									actStatus4 = false;
									actStatus5 = false;
									actStatus6 = false;									
									if tonumber(ACTIVESTAT) == 1 then 
										actStatus1 = true;
									elseif tonumber(ACTIVESTAT) == 2 then 
										actStatus2 = true;
									elseif tonumber(ACTIVESTAT) == 3 then 
										actStatus3 = true;
									elseif tonumber(ACTIVESTAT) == 4 then 
										actStatus4 = true;
									elseif tonumber(ACTIVESTAT) == 5 then 
										actStatus5 = true;
									elseif tonumber(ACTIVESTAT) == 6 then 
										actStatus6 = true;
										end	
									end											
								local ACERTO = tonumber(self.boxDetalhesDoItem.node.catAcerto) or 1;
								local DadoAcerto = math.random(1,100);
								if (MarCRIT >= 1) then
									if (MarCRIT >= DadoAcerto) then 
									bonCRIT=1;	
									MSG_CRIT = ("[§K9](CRIT)" .. MSG_corGolpe)	
									end
								if (TriplCRIT == true) then bonCRIT=2; 
									MSG_CRIT = ("[§K9](3xCRIT)" .. MSG_corGolpe)end
									end
								local rolagemAcerto = 0;
								if (ACERTO == 1) then	
									rolagemAcerto = PRECP - DadoAcerto;		
									elseif (ACERTO == 2) then	
										rolagemAcerto = PRECM - DadoAcerto;
									elseif (ACERTO == 4) then	
										rolagemAcerto = math.floor((PRECP - DadoAcerto)/2);	
									end	
								MSG_ACERTO = "[§B]Acerto:[§B] " .. rolagemAcerto .. MSG_SubEVA .. "[" .. DadoAcerto .. "]; "
								if (ACERTO == 3) then 
									MSG_ACERTO = "[§B]Acerto:[§B] Auto [" .. DadoAcerto .. "]; "	
									end
								local TIPODANO = tonumber(self.boxDetalhesDoItem.node.AtkTypeF or 1)
								local DanoCALC = 0;
								if (TIPODANO == 3) then
									ARMA1:rolarLocalmente()		
									DanoCALC = ARMA1.resultado	
									elseif (TIPODANO == 4) then
										ARMA2:rolarLocalmente()		
										DanoCALC = ARMA2.resultado	
									elseif (TIPODANO == 2) then
										DANOG:rolarLocalmente()		
										DanoCALC = DANOG.resultado	
									end
								DANFINAL = math.floor((DANMULT+bonCRIT)*DanoCALC)
								if (DANFINAL >= 999 and DAMAGELIM == false) then 
									DANFINAL = 999 	
									end;
								DANWEAK = math.floor((DANMULT+bonCRIT+0.5)*DanoCALC)
								if (DANWEAK >= 999 and DAMAGELIM == false) then 
									DANWEAK = 999 	
									end;
								DAN75 = math.floor((DANMULT+bonCRIT-0.25)*DanoCALC)
								if (DAN75 >= 999 and DAMAGELIM == false) then 
									DAN75 = 999 	
									end;
								DAN125 = math.floor((DANMULT+bonCRIT+0.25)*DanoCALC)
								if (DAN125 >= 999 and DAMAGELIM == false) then 
									DAN125 = 999 	
									end;
								if (2 >= ELDANO) then
									MSG_DANO = ("[§B]Dano: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_CRIT .. MSG_DM .. MSG_SubDEF .. MSG_DanType .. "[§K14]; ")
									elseif (ELDANO >= 3 and 11 >= ELDANO) then
										MSG_DANO = ("[§B]Dano: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_CRIT .. MSG_DM .. MSG_SubDEF .. MSG_DanType .. "[§K14]; [§B]Vs Weak: [§B]" .. MSG_corGolpe .. DANWEAK .. "[§K14]; ")
									elseif (ELDANO == 12) then
										MSG_DANO = ("[§B]Restaura: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_DM .. "[§K14]; [§B][§K4]-25%:[§K14] " .. DAN75 .. "[§K14]; [§B][§K9]+25%:[§K14] " .. DAN125 )
									end	
								if (TIPODANO == 1) then
									MSG_DANO ="";
									end
								if (actStatus1 == true) then
									local DadoStatus1 = math.random(1,100);
									rolagemStatus1 = getRollStatus(Status1, DadoStatus1, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status1) then 					
										MSG_Status1 = "CdS de [§B]" .. NomeStatus1 .. "[§B]: " .. rolagemStatus1 .. MSG_SubStatus1 .. " (" .. DadoStatus1 .. "); ";
										elseif (Status1 >= 6 and 8 >= Status1) then 
											MSG_Status1 = "CdS% de [§B]" .. NomeStatus1 .. "[§B]: " .. rolagemStatus1 .. " (" .. DadoStatus1 .. "); ";
										elseif (Status1 == 9) then 					
											MSG_Status1 = "CdS de [§B]" .. NomeStatus1 .. "[§B]: Auto (" .. DadoStatus1 .. "); ";
										end
									end	
										
								if (actStatus2 == true) then
									local DadoStatus2 = math.random(1,100);
									rolagemStatus2 = getRollStatus(Status2, DadoStatus2, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status2) then 					
										MSG_Status2 = "CdS de [§B]" .. NomeStatus2 .. "[§B]: " .. rolagemStatus2 .. MSG_SubStatus2 .. " (" .. DadoStatus2 .. "); ";
										elseif (Status2 >= 6 and 8 >= Status2) then 
											MSG_Status2 = "CdS% de [§B]" .. NomeStatus2 .. "[§B]: " .. rolagemStatus2 .. " (" .. DadoStatus2 .. "); ";
										elseif (Status2 == 9) then 					
											MSG_Status2 = "CdS de [§B]" .. NomeStatus2 .. "[§B]: Auto (" .. DadoStatus2 .. "); ";
										end
									end		
								if (actStatus3 == true) then
									local DadoStatus3 = math.random(1,100);
									rolagemStatus3 = getRollStatus(Status3, DadoStatus3, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status3) then 					
										MSG_Status3 = "CdS de [§B]" .. NomeStatus3 .. "[§B]: " .. rolagemStatus3 .. MSG_SubStatus3 .. " (" .. DadoStatus3 .. "); ";
										elseif (Status3 >= 6 and 8 >= Status3) then 
											MSG_Status3 = "CdS% de [§B]" .. NomeStatus3 .. "[§B]: " .. rolagemStatus3 .. " (" .. DadoStatus3 .. "); ";
										elseif (Status3 == 9) then 					
											MSG_Status3 = "CdS de [§B]" .. NomeStatus3 .. "[§B]: Auto (" .. DadoStatus3 .. "); ";
										end
									end	
								if (actStatus4 == true) then
									local DadoStatus4 = math.random(1,100);
									rolagemStatus4 = getRollStatus(Status4, DadoStatus4, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status4) then 					
										MSG_Status4 = "CdS de [§B]" .. NomeStatus4 .. "[§B]: " .. rolagemStatus4 .. MSG_SubStatus4 .. " (" .. DadoStatus4 .. ");";
										elseif (Status4 >= 6 and 8 >= Status4) then 
											MSG_Status4 = "CdS% de [§B]" .. NomeStatus4 .. "[§B]: " .. rolagemStatus4 .. " (" .. DadoStatus4 .. ");";
										elseif (Status4 == 9) then 					
											MSG_Status4 = "CdS de [§B]" .. NomeStatus4 .. "[§B]: Auto (" .. DadoStatus4 .. ");";
										end
									end		
								if (actStatus5 == true) then
									local DadoStatus5 = math.random(1,100);
									rolagemStatus5 = getRollStatus(Status5, DadoStatus5, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status5) then 					
										MSG_Status5 = "CdS de [§B]" .. NomeStatus5 .. "[§B]: " .. rolagemStatus5 .. MSG_SubStatus5 .. " (" .. DadoStatus5 .. ");";
										elseif (Status5 >= 6 and 8 >= Status5) then 
											MSG_Status5 = "CdS% de [§B]" .. NomeStatus5 .. "[§B]: " .. rolagemStatus5 .. " (" .. DadoStatus5 .. ");";
										elseif (Status5 == 9) then 					
											MSG_Status5 = "CdS de [§B]" .. NomeStatus5 .. "[§B]: Auto (" .. DadoStatus5 .. ");";
										end
									end		
								if (actStatus6 == true) then
									local DadoStatus6 = math.random(1,100);
									rolagemStatus6 = getRollStatus(Status6, DadoStatus6, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status6) then 					
										MSG_Status6 = "CdS de [§B]" .. NomeStatus6 .. "[§B]: " .. rolagemStatus6 .. MSG_SubStatus6 .. " (" .. DadoStatus6 .. ");";
										elseif (Status6 >= 6 and 8 >= Status6) then 
											MSG_Status6 = "CdS% de [§B]" .. NomeStatus6 .. "[§B]: " .. rolagemStatus6 .. " (" .. DadoStatus6 .. ");";
										elseif (Status6 == 9) then 					
											MSG_Status6 = "CdS de [§B]" .. NomeStatus6 .. "[§B]: Auto (" .. DadoStatus6 .. ");";
										end
									end		
								if (REPEAT == 1) then
									mesa.activeChat:enviarMensagem(MSG_corGolpe .. NOME .. MSG_Ammo .. MSG_CMP .. MSG_TARGET .. MSG_ACERTO .. MSG_DANO .. MSG_Status1 .. MSG_Status2 .. MSG_Status3 .. MSG_Status4 .. MSG_Status5 .. MSG_Status6)
									elseif (REPEAT >= 2) then	
										mesa.activeChat:enviarMensagem("[§K14]#" .. i .. "; " .. MSG_TARGET .. MSG_ACERTO .. MSG_DANO .. MSG_Status1 .. MSG_Status2 .. MSG_Status3 .. MSG_Status4 .. MSG_Status5 .. MSG_Status6)
									end		
								end
							end
				
						if (ALVO == 4) then
							local bonCRIT = 0;
							local MSG_CRIT = "";
							local MSG_TARGET = ""
							mesa.activeChat:enviarMensagem(MSG_corGolpe .. NOME .. MSG_Ammo .. MSG_CMP)
							for j = 1, #mobs do
								if (j == 1) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[j] .. "; ")	
									elseif (j == 2) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[j] .. "; ")	
									elseif (j == 3) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[j] .. "; ")	
									elseif (j == 4) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[j] .. "; ")	
									elseif (j == 5) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[j] .. "; ")	
									elseif (j == 6) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[j] .. "; ")	
									elseif (j == 7) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[j] .. "; ")	
									elseif (j == 8) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[j] .. "; ")	
									elseif (j == 9) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[j] .. "; ")	
									elseif (j == 10) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[j] .. "; ")	
									elseif (j == 11) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. mobs[j] .. "; ")	
									end	
								if ((STATRANDOM) == true) and (#Rstatus > 0) then
									local ACTIVESTAT = tonumber(math.random(1,#Rstatus));	
									MSG_Status1=""		
									MSG_Status2=""	
									MSG_Status3=""	
									MSG_Status4=""	
									MSG_Status5=""	
									MSG_Status6=""						
									actStatus1 = false;
									actStatus2 = false;
									actStatus3 = false;
									actStatus4 = false;
									actStatus5 = false;
									actStatus6 = false;									
									if tonumber(ACTIVESTAT) == 1 then 
										actStatus1 = true;
									elseif tonumber(ACTIVESTAT) == 2 then 
										actStatus2 = true;
									elseif tonumber(ACTIVESTAT) == 3 then 
										actStatus3 = true;
									elseif tonumber(ACTIVESTAT) == 4 then 
										actStatus4 = true;
									elseif tonumber(ACTIVESTAT) == 5 then 
										actStatus5 = true;
									elseif tonumber(ACTIVESTAT) == 6 then 
										actStatus6 = true;
										end	
									end							
								local ACERTO = tonumber(self.boxDetalhesDoItem.node.catAcerto) or 1;
								local DadoAcerto = math.random(1,100);
								if (MarCRIT >= 1) then
									if (MarCRIT >= DadoAcerto) then 
										bonCRIT=1;	
										MSG_CRIT = ("[§K9](CRIT)" .. MSG_corGolpe)	
										end
									if (TriplCRIT == true) then 
										bonCRIT=2; 
										MSG_CRIT = ("[§K9](3xCRIT)" .. MSG_corGolpe)
										end
									end
								local rolagemAcerto = 0;
								if (ACERTO == 1) then	
									rolagemAcerto = PRECP - DadoAcerto;		
									elseif (ACERTO == 2) then	
										rolagemAcerto = PRECM - DadoAcerto;
									elseif (ACERTO == 4) then	
										rolagemAcerto = math.floor((PRECP - DadoAcerto)/2);	
									end			
								MSG_ACERTO = "[§B]Acerto:[§B] " .. rolagemAcerto .. MSG_SubEVA .. "[" .. DadoAcerto .. "]; "
								if (ACERTO == 3) then MSG_ACERTO = "[§B]Acerto:[§B] Auto [" .. DadoAcerto .. "]; "	end
								local TIPODANO = tonumber(self.boxDetalhesDoItem.node.AtkTypeF or 1)
								local DanoCALC = 0;
								if (TIPODANO == 3) then
									ARMA1:rolarLocalmente()		
									DanoCALC = ARMA1.resultado	
									elseif (TIPODANO == 4) then
										ARMA2:rolarLocalmente()		
										DanoCALC = ARMA2.resultado	
									elseif (TIPODANO == 2) then
										DANOG:rolarLocalmente()		
										DanoCALC = DANOG.resultado	
									end
								DANFINAL = math.floor((DANMULT+bonCRIT)*DanoCALC)
								if (DANFINAL >= 999 and DAMAGELIM == false) then 
									DANFINAL = 999 	
									end;
								DANWEAK = math.floor((DANMULT+bonCRIT+0.5)*DanoCALC)
								if (DANWEAK >= 999 and DAMAGELIM == false) then 
									DANWEAK = 999 	
									end;
								DAN75 = math.floor((DANMULT+bonCRIT-0.25)*DanoCALC)
								if (DAN75 >= 999 and DAMAGELIM == false) then 
									DAN75 = 999 	
									end;
								DAN125 = math.floor((DANMULT+bonCRIT+0.25)*DanoCALC)
								if (DAN125 >= 999 and DAMAGELIM == false) then 
									DAN125 = 999 	
									end;
								if (2 >= ELDANO) then
									MSG_DANO = ("[§B]Dano: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_CRIT .. MSG_DM .. MSG_SubDEF .. MSG_DanType .. "[§K14]; ")
									elseif (ELDANO >= 3 and 11 >= ELDANO) then
										MSG_DANO = ("[§B]Dano: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_CRIT .. MSG_DM .. MSG_SubDEF .. MSG_DanType .. "[§K14]; [§B]Vs Weak: [§B]" .. MSG_corGolpe .. DANWEAK .. "[§K14]; ")
									elseif (ELDANO == 12) then
										MSG_DANO = ("[§B]Restaura: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_DM .. "[§K14]; [§B][§K4]-25%:[§K14] " .. DAN75 .. "[§K14]; [§B][§K9]+25%:[§K14] " .. DAN125 )
									end	
								if (TIPODANO == 1) then
									MSG_DANO ="";
									end

								if (actStatus1 == true) then
									local DadoStatus1 = math.random(1,100);
									rolagemStatus1 = getRollStatus(Status1, DadoStatus1, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status1) then 					
										MSG_Status1 = "CdS de [§B]" .. NomeStatus1 .. "[§B]: " .. rolagemStatus1 .. MSG_SubStatus1 .. " (" .. DadoStatus1 .. "); ";
									elseif (Status1 >= 6 and 8 >= Status1) then 
										MSG_Status1 = "CdS% de [§B]" .. NomeStatus1 .. "[§B]: " .. rolagemStatus1 .. " (" .. DadoStatus1 .. "); ";
									elseif (Status1 == 9) then 					
										MSG_Status1 = "CdS de [§B]" .. NomeStatus1 .. "[§B]: Auto (" .. DadoStatus1 .. "); ";
										end
								end	
										
								if (actStatus2 == true) then
									local DadoStatus2 = math.random(1,100);
									rolagemStatus2 = getRollStatus(Status2, DadoStatus2, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status2) then 					
										MSG_Status2 = "CdS de [§B]" .. NomeStatus2 .. "[§B]: " .. rolagemStatus2 .. MSG_SubStatus2 .. " (" .. DadoStatus2 .. "); ";
										elseif (Status2 >= 6 and 8 >= Status2) then 
											MSG_Status2 = "CdS% de [§B]" .. NomeStatus2 .. "[§B]: " .. rolagemStatus2 .. " (" .. DadoStatus2 .. "); ";
										elseif (Status2 == 9) then 					
											MSG_Status2 = "CdS de [§B]" .. NomeStatus2 .. "[§B]: Auto (" .. DadoStatus2 .. "); ";
										end
									end		
								if (actStatus3 == true) then
									local DadoStatus3 = math.random(1,100);
									rolagemStatus3 = getRollStatus(Status3, DadoStatus3, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status3) then 					
										MSG_Status3 = "CdS de [§B]" .. NomeStatus3 .. "[§B]: " .. rolagemStatus3 .. MSG_SubStatus3 .. " (" .. DadoStatus3 .. "); ";
										elseif (Status3 >= 6 and 8 >= Status3) then 
											MSG_Status3 = "CdS% de [§B]" .. NomeStatus3 .. "[§B]: " .. rolagemStatus3 .. " (" .. DadoStatus3 .. "); ";
										elseif (Status3 == 9) then 					
											MSG_Status3 = "CdS de [§B]" .. NomeStatus3 .. "[§B]: Auto (" .. DadoStatus3 .. "); ";
										end
									end	
								if (actStatus4 == true) then
									local DadoStatus4 = math.random(1,100);
									rolagemStatus4 = getRollStatus(Status4, DadoStatus4, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status4) then 					
										MSG_Status4 = "CdS de [§B]" .. NomeStatus4 .. "[§B]: " .. rolagemStatus4 .. MSG_SubStatus4 .. " (" .. DadoStatus4 .. ");";
										elseif (Status4 >= 6 and 8 >= Status4) then 
											MSG_Status4 = "CdS% de [§B]" .. NomeStatus4 .. "[§B]: " .. rolagemStatus4 .. " (" .. DadoStatus4 .. ");";
										elseif (Status4 == 9) then 					
											MSG_Status4 = "CdS de [§B]" .. NomeStatus4 .. "[§B]: Auto (" .. DadoStatus4 .. ");";
										end
									end		
								if (actStatus5 == true) then
									local DadoStatus5 = math.random(1,100);
									rolagemStatus5 = getRollStatus(Status5, DadoStatus5, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status5) then 					
										MSG_Status5 = "CdS de [§B]" .. NomeStatus5 .. "[§B]: " .. rolagemStatus5 .. MSG_SubStatus5 .. " (" .. DadoStatus5 .. ");";
										elseif (Status5 >= 6 and 8 >= Status5) then 
											MSG_Status5 = "CdS% de [§B]" .. NomeStatus5 .. "[§B]: " .. rolagemStatus5 .. " (" .. DadoStatus5 .. ");";
										elseif (Status5 == 9) then 					
											MSG_Status5 = "CdS de [§B]" .. NomeStatus5 .. "[§B]: Auto (" .. DadoStatus5 .. ");";
										end
									end		
								if (actStatus6 == true) then
									local DadoStatus6 = math.random(1,100);
									rolagemStatus6 = getRollStatus(Status6, DadoStatus6, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status6) then 					
										MSG_Status6 = "CdS de [§B]" .. NomeStatus6 .. "[§B]: " .. rolagemStatus6 .. MSG_SubStatus6 .. " (" .. DadoStatus6 .. ");";
										elseif (Status6 >= 6 and 8 >= Status6) then 
											MSG_Status6 = "CdS% de [§B]" .. NomeStatus6 .. "[§B]: " .. rolagemStatus6 .. " (" .. DadoStatus6 .. ");";
										elseif (Status6 == 9) then 					
											MSG_Status6 = "CdS de [§B]" .. NomeStatus6 .. "[§B]: Auto (" .. DadoStatus6 .. ");";
										end
									end		
								mesa.activeChat:enviarMensagem("[§K14]" .. MSG_TARGET .. MSG_ACERTO .. MSG_DANO .. MSG_Status1 .. MSG_Status2 .. MSG_Status3 .. MSG_Status4 .. MSG_Status5 .. MSG_Status6)
								end
							end

						if (ALVO == 5) then
							local bonCRIT = 0;
							local MSG_CRIT = "";
							local MSG_TARGET = ""
							mesa.activeChat:enviarMensagem(MSG_corGolpe .. NOME .. MSG_Ammo .. MSG_CMP .. MSG_TARGET)
							for k = 1, #allies do
								if (k == 1) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. allies[k] .. "; ")	
									elseif (k == 2) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. allies[k] .. "; ")	
									elseif (k == 3) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. allies[k] .. "; ")	
									elseif (k == 4) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. allies[k] .. "; ")	
									elseif (k == 5) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. allies[k] .. "; ")	
									elseif (k == 6) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. allies[k] .. "; ")	
									elseif (k == 7) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. allies[k] .. "; ")	
									elseif (k == 8) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. allies[k] .. "; ")	
									elseif (k == 9) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. allies[k] .. "; ")	
									elseif (k == 10) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. allies[k] .. "; ")	
									elseif (k == 11) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. allies[k] .. "; ")	
									end					
								if ((STATRANDOM) == true) and (#Rstatus > 0) then
									local ACTIVESTAT = tonumber(math.random(1,#Rstatus));	
									MSG_Status1=""		
									MSG_Status2=""	
									MSG_Status3=""	
									MSG_Status4=""	
									MSG_Status5=""	
									MSG_Status6=""						
									actStatus1 = false;
									actStatus2 = false;
									actStatus3 = false;
									actStatus4 = false;
									actStatus5 = false;
									actStatus6 = false;									
									if tonumber(ACTIVESTAT) == 1 then 
										actStatus1 = true;
									elseif tonumber(ACTIVESTAT) == 2 then 
										actStatus2 = true;
									elseif tonumber(ACTIVESTAT) == 3 then 
										actStatus3 = true;
									elseif tonumber(ACTIVESTAT) == 4 then 
										actStatus4 = true;
									elseif tonumber(ACTIVESTAT) == 5 then 
										actStatus5 = true;
									elseif tonumber(ACTIVESTAT) == 6 then 
										actStatus6 = true;
										end	
									end	
								local ACERTO = tonumber(self.boxDetalhesDoItem.node.catAcerto) or 1;
								local DadoAcerto = math.random(1,100);
								if (MarCRIT >= 1) then
									if (MarCRIT >= DadoAcerto) then 
										bonCRIT=1;	
										MSG_CRIT = ("[§K9](CRIT)" .. MSG_corGolpe)	
										end
									if (TriplCRIT == true) then 
										bonCRIT=2; 
										MSG_CRIT = ("[§K9](3xCRIT)" .. MSG_corGolpe)
										end
									end
								local rolagemAcerto = 0;
								if (ACERTO == 1) then	
									rolagemAcerto = PRECP - DadoAcerto;		
									elseif (ACERTO == 2) then	
										rolagemAcerto = PRECM - DadoAcerto;
									elseif (ACERTO == 4) then	
										rolagemAcerto = math.floor((PRECP - DadoAcerto)/2);	
									end			
								MSG_ACERTO = "[§B]Acerto:[§B] " .. rolagemAcerto .. MSG_SubEVA .. "[" .. DadoAcerto .. "]; "
								if (ACERTO == 3) then MSG_ACERTO = "[§B]Acerto:[§B] Auto [" .. DadoAcerto .. "]; "	end
								local TIPODANO = tonumber(self.boxDetalhesDoItem.node.AtkTypeF or 1)
								local DanoCALC = 0;
								if (TIPODANO == 3) then
									ARMA1:rolarLocalmente()		
									DanoCALC = ARMA1.resultado	
									elseif (TIPODANO == 4) then
										ARMA2:rolarLocalmente()		
										DanoCALC = ARMA2.resultado	
									elseif (TIPODANO == 2) then
										DANOG:rolarLocalmente()		
										DanoCALC = DANOG.resultado	
									end
								DANFINAL = math.floor((DANMULT+bonCRIT)*DanoCALC)
								if (DANFINAL >= 999 and DAMAGELIM == false) then 
									DANFINAL = 999 	
									end;
								DANWEAK = math.floor((DANMULT+bonCRIT+0.5)*DanoCALC)
								if (DANWEAK >= 999 and DAMAGELIM == false) then 
									DANWEAK = 999 	
									end;
								DAN75 = math.floor((DANMULT+bonCRIT-0.25)*DanoCALC)
								if (DAN75 >= 999 and DAMAGELIM == false) then 
									DAN75 = 999 	
									end;
								DAN125 = math.floor((DANMULT+bonCRIT+0.25)*DanoCALC)
								if (DAN125 >= 999 and DAMAGELIM == false) then 
									DAN125 = 999 	
									end;
								if (2 >= ELDANO) then
									MSG_DANO = ("[§B]Dano: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_CRIT .. MSG_DM .. MSG_SubDEF .. MSG_DanType .. "[§K14]; ")
									elseif (ELDANO >= 3 and 11 >= ELDANO) then
										MSG_DANO = ("[§B]Dano: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_CRIT .. MSG_DM .. MSG_SubDEF .. MSG_DanType .. "[§K14]; [§B]Vs Weak: [§B]" .. MSG_corGolpe .. DANWEAK .. "[§K14]; ")
									elseif (ELDANO == 12) then
										MSG_DANO = ("[§B]Restaura: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_DM .. "[§K14]; [§B][§K4]-25%:[§K14] " .. DAN75 .. "[§K14]; [§B][§K9]+25%:[§K14] " .. DAN125 )
									end		
								if (TIPODANO == 1) then
									MSG_DANO ="";
									end
								if (actStatus1 == true) then
									MSG_Status1 = ("Recebe [§B]" .. NomeStatus1 .. "[§B]; ");
									end	
								if (actStatus2 == true) then
									MSG_Status2 = ("Recebe [§B]" .. NomeStatus2 .. "[§B]; ");
									end	
								if (actStatus3 == true) then
									MSG_Status3 = ("Recebe [§B]" .. NomeStatus3 .. "[§B]; ");
									end	
								if (actStatus4 == true) then
									MSG_Status4 = ("Recebe [§B]" .. NomeStatus4 .. "[§B]; ");
									end	
								if (actStatus5 == true) then
									MSG_Status5 = ("Recebe [§B]" .. NomeStatus5 .. "[§B]; ");
									end	
								if (actStatus6 == true) then
									MSG_Status6 = ("Recebe [§B]" .. NomeStatus6 .. "[§B]; ");
									end		
							
								if (ELDANO ~= 12) then
									mesa.activeChat:enviarMensagem("[§K14]" .. MSG_TARGET .. MSG_ACERTO .. MSG_DANO .. MSG_Status1 .. MSG_Status2 .. MSG_Status3 .. MSG_Status4 .. MSG_Status5 .. MSG_Status6)
									end
								if (ELDANO == 12) then 
									mesa.activeChat:enviarMensagem("[§K14]" .. MSG_TARGET .. MSG_DANO .. MSG_Status1 .. MSG_Status2 .. MSG_Status3 .. MSG_Status4 .. MSG_Status5 .. MSG_Status6)
									end
								end
							end

						if (ALVO == 6) then
							local bonCRIT = 0;
							local MSG_CRIT = "";
							local MSG_TARGET = ""
							mesa.activeChat:enviarMensagem(MSG_corGolpe .. NOME .. MSG_Ammo .. MSG_CMP)
							for j = 1, #all  do
								if (j == 1) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 2) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 3) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 4) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 5) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 6) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 7) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 8) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 9) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 10) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 11) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 12) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 13) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 14) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 15) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 16) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 17) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 18) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 19) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 20) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 21) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									elseif (j == 22) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[j] .. "; ")	
									end		
								if ((STATRANDOM) == true) and (#Rstatus > 0) then
									local ACTIVESTAT = tonumber(math.random(1,#Rstatus));	
									MSG_Status1=""		
									MSG_Status2=""	
									MSG_Status3=""	
									MSG_Status4=""	
									MSG_Status5=""	
									MSG_Status6=""						
									actStatus1 = false;
									actStatus2 = false;
									actStatus3 = false;
									actStatus4 = false;
									actStatus5 = false;
									actStatus6 = false;									
									if tonumber(ACTIVESTAT) == 1 then 
										actStatus1 = true;
									elseif tonumber(ACTIVESTAT) == 2 then 
										actStatus2 = true;
									elseif tonumber(ACTIVESTAT) == 3 then 
										actStatus3 = true;
									elseif tonumber(ACTIVESTAT) == 4 then 
										actStatus4 = true;
									elseif tonumber(ACTIVESTAT) == 5 then 
										actStatus5 = true;
									elseif tonumber(ACTIVESTAT) == 6 then 
										actStatus6 = true;
										end	
									end	
								local ACERTO = tonumber(self.boxDetalhesDoItem.node.catAcerto) or 1;
								local DadoAcerto = math.random(1,100);
								if (MarCRIT >= 1) then
									if (MarCRIT >= DadoAcerto) then 
										bonCRIT=1;	
										MSG_CRIT = ("[§K9](CRIT)" .. MSG_corGolpe)	
										end
									if (TriplCRIT == true) then 
										bonCRIT=2; 
										MSG_CRIT = ("[§K9](3xCRIT)" .. MSG_corGolpe)
										end
									end
								local rolagemAcerto = 0;
								if (ACERTO == 1) then	
									rolagemAcerto = PRECP - DadoAcerto;		
									elseif (ACERTO == 2) then	
										rolagemAcerto = PRECM - DadoAcerto;
									elseif (ACERTO == 4) then	
										rolagemAcerto = math.floor((PRECP - DadoAcerto)/2);	
									end			
								MSG_ACERTO = "[§B]Acerto:[§B] " .. rolagemAcerto .. MSG_SubEVA .. "[" .. DadoAcerto .. "]; "
								if (ACERTO == 3) then MSG_ACERTO = "[§B]Acerto:[§B] Auto [" .. DadoAcerto .. "]; "	end
								local TIPODANO = tonumber(self.boxDetalhesDoItem.node.AtkTypeF or 1)
								local DanoCALC = 0;
								if (TIPODANO == 3) then
									ARMA1:rolarLocalmente()		
									DanoCALC = ARMA1.resultado	
									elseif (TIPODANO == 4) then
										ARMA2:rolarLocalmente()		
										DanoCALC = ARMA2.resultado	
									elseif (TIPODANO == 2) then
										DANOG:rolarLocalmente()		
										DanoCALC = DANOG.resultado	
									end
								DANFINAL = math.floor((DANMULT+bonCRIT)*DanoCALC)
								if (DANFINAL >= 999 and DAMAGELIM == false) then 
									DANFINAL = 999 	
									end;
								DANWEAK = math.floor((DANMULT+bonCRIT+0.5)*DanoCALC)
								if (DANWEAK >= 999 and DAMAGELIM == false) then 
									DANWEAK = 999 	
									end;
								DAN75 = math.floor((DANMULT+bonCRIT-0.25)*DanoCALC)
								if (DAN75 >= 999 and DAMAGELIM == false) then 
									DAN75 = 999 	
									end;
								DAN125 = math.floor((DANMULT+bonCRIT+0.25)*DanoCALC)
								if (DAN125 >= 999 and DAMAGELIM == false) then 
									DAN125 = 999 	
									end;
								if (2 >= ELDANO) then
									MSG_DANO = ("[§B]Dano: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_CRIT .. MSG_DM .. MSG_SubDEF .. MSG_DanType .. "[§K14]; ")
									elseif (ELDANO >= 3 and 11 >= ELDANO) then
										MSG_DANO = ("[§B]Dano: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_CRIT .. MSG_DM .. MSG_SubDEF .. MSG_DanType .. "[§K14]; [§B]Vs Weak: [§B]" .. MSG_corGolpe .. DANWEAK .. "[§K14]; ")
									elseif (ELDANO == 12) then
										MSG_DANO = ("[§B]Restaura: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_DM .. "[§K14]; [§B][§K4]-25%:[§K14] " .. DAN75 .. "[§K14]; [§B][§K9]+25%:[§K14] " .. DAN125 )
									end	
								if (TIPODANO == 1) then
									MSG_DANO ="";
									end
								if (actStatus1 == true) then
									local DadoStatus1 = math.random(1,100);
									rolagemStatus1 = getRollStatus(Status1, DadoStatus1, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status1) then 					
										MSG_Status1 = "CdS de [§B]" .. NomeStatus1 .. "[§B]: " .. rolagemStatus1 .. MSG_SubStatus1 .. " (" .. DadoStatus1 .. "); ";
										elseif (Status1 >= 6 and 8 >= Status1) then 
											MSG_Status1 = "CdS% de [§B]" .. NomeStatus1 .. "[§B]: " .. rolagemStatus1 .. " (" .. DadoStatus1 .. "); ";
										elseif (Status1 == 9) then 					
											MSG_Status1 = "CdS de [§B]" .. NomeStatus1 .. "[§B]: Auto (" .. DadoStatus1 .. "); ";
										end
									end	
										
								if (actStatus2 == true) then
									local DadoStatus2 = math.random(1,100);
										if SubStatus2 == 2 then MSG_SubStatus2 = "[-EVAM]" end
									rolagemStatus2 = getRollStatus(Status2, DadoStatus2, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status2) then 					
										MSG_Status2 = "CdS de [§B]" .. NomeStatus2 .. "[§B]: " .. rolagemStatus2 .. MSG_SubStatus2 .. " (" .. DadoStatus2 .. "); ";
										elseif (Status2 >= 6 and 8 >= Status2) then 
											MSG_Status2 = "CdS% de [§B]" .. NomeStatus2 .. "[§B]: " .. rolagemStatus2 .. " (" .. DadoStatus2 .. "); ";
										elseif (Status2 == 9) then 					
											MSG_Status2 = "CdS de [§B]" .. NomeStatus2 .. "[§B]: Auto (" .. DadoStatus2 .. "); ";
										end
									end		
								if (actStatus3 == true) then
									local DadoStatus3 = math.random(1,100);
									rolagemStatus3 = getRollStatus(Status3, DadoStatus3, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status3) then 					
										MSG_Status3 = "CdS de [§B]" .. NomeStatus3 .. "[§B]: " .. rolagemStatus3 .. MSG_SubStatus3 .. " (" .. DadoStatus3 .. "); ";
										elseif (Status3 >= 6 and 8 >= Status3) then 
											MSG_Status3 = "CdS% de [§B]" .. NomeStatus3 .. "[§B]: " .. rolagemStatus3 .. " (" .. DadoStatus3 .. "); ";
										elseif (Status3 == 9) then 					
											MSG_Status3 = "CdS de [§B]" .. NomeStatus3 .. "[§B]: Auto (" .. DadoStatus3 .. "); ";
										end
									end	
								if (actStatus4 == true) then
									local DadoStatus4 = math.random(1,100);
									rolagemStatus4 = getRollStatus(Status4, DadoStatus4, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status4) then 					
										MSG_Status4 = "CdS de [§B]" .. NomeStatus4 .. "[§B]: " .. rolagemStatus4 .. MSG_SubStatus4 .. " (" .. DadoStatus4 .. ");";
										elseif (Status4 >= 6 and 8 >= Status4) then 
											MSG_Status4 = "CdS% de [§B]" .. NomeStatus4 .. "[§B]: " .. rolagemStatus4 .. " (" .. DadoStatus4 .. ");";
										elseif (Status4 == 9) then 					
											MSG_Status4 = "CdS de [§B]" .. NomeStatus4 .. "[§B]: Auto (" .. DadoStatus4 .. ");";
										end
									end		
								if (actStatus5 == true) then
									local DadoStatus5 = math.random(1,100);
									rolagemStatus5 = getRollStatus(Status5, DadoStatus5, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status5) then 					
										MSG_Status5 = "CdS de [§B]" .. NomeStatus5 .. "[§B]: " .. rolagemStatus5 .. MSG_SubStatus5 .. " (" .. DadoStatus5 .. ");";
										elseif (Status5 >= 6 and 8 >= Status5) then 
											MSG_Status5 = "CdS% de [§B]" .. NomeStatus5 .. "[§B]: " .. rolagemStatus5 .. " (" .. DadoStatus5 .. ");";
										elseif (Status5 == 9) then 					
											MSG_Status5 = "CdS de [§B]" .. NomeStatus5 .. "[§B]: Auto (" .. DadoStatus5 .. ");";
										end
									end		
								if (actStatus6 == true) then
									local DadoStatus6 = math.random(1,100);
									rolagemStatus6 = getRollStatus(Status6, DadoStatus6, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status6) then 					
										MSG_Status6 = "CdS de [§B]" .. NomeStatus6 .. "[§B]: " .. rolagemStatus6 .. MSG_SubStatus6 .. " (" .. DadoStatus6 .. ");";
										elseif (Status6 >= 6 and 8 >= Status6) then 
											MSG_Status6 = "CdS% de [§B]" .. NomeStatus6 .. "[§B]: " .. rolagemStatus6 .. " (" .. DadoStatus6 .. ");";
										elseif (Status6 == 9) then 					
											MSG_Status6 = "CdS de [§B]" .. NomeStatus6 .. "[§B]: Auto (" .. DadoStatus6 .. ");";
										end
									end		
								mesa.activeChat:enviarMensagem("[§K14]" .. MSG_TARGET .. MSG_ACERTO .. MSG_DANO .. MSG_Status1 .. MSG_Status2 .. MSG_Status3 .. MSG_Status4 .. MSG_Status5 .. MSG_Status6)
								end
							end

						if (ALVO == 7) then
							local MSG_TARGET = ""
							if (REPEAT >= 2) then	
								mesa.activeChat:enviarMensagem(MSG_corGolpe .. NOME .. MSG_Ammo .. MSG_CMP .. MSG_TARGET)
								end
							for i = 1, REPEAT, 1 do
							local m = math.random(1,#all);
								if (m == 1) then 
									MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 2) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 3) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 4) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 5) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 6) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 7) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 8) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 9) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 10) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 11) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 12) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 13) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 14) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 15) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 16) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 17) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 18) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 19) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 20) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 21) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									elseif (m == 22) then 
										MSG_TARGET = ("[§B]Alvo:[§B] " .. all[m] .. "; ")	
									end				
								bonCRIT = 0;
								MSG_CRIT= "";			
								local ACERTO = tonumber(self.boxDetalhesDoItem.node.catAcerto) or 1;
								local DadoAcerto = math.random(1,100);
								if (MarCRIT >= 1) then
									if (MarCRIT >= DadoAcerto) then 
										bonCRIT=1;	
										MSG_CRIT = ("[§K9](CRIT)" .. MSG_corGolpe)	
										end
									if (TriplCRIT == true) then 
										bonCRIT=2; 
										MSG_CRIT = ("[§K9](3xCRIT)" .. MSG_corGolpe)
										end
									end
								local rolagemAcerto = 0;
								if (ACERTO == 1) then	
									rolagemAcerto = PRECP - DadoAcerto;		
									elseif (ACERTO == 2) then	
										rolagemAcerto = PRECM - DadoAcerto;
									elseif (ACERTO == 4) then	
										rolagemAcerto = math.floor((PRECP - DadoAcerto)/2);	
									end			
								MSG_ACERTO = "[§B]Acerto:[§B] " .. rolagemAcerto .. MSG_SubEVA .. "[" .. DadoAcerto .. "]; "
								if (ACERTO == 3) then 
									MSG_ACERTO = "[§B]Acerto:[§B] Auto [" .. DadoAcerto .. "]; "	
									end
								local TIPODANO = tonumber(self.boxDetalhesDoItem.node.AtkTypeF or 1)
								local DanoCALC = 0;
								if (TIPODANO == 3) then
									ARMA1:rolarLocalmente()		
									DanoCALC = ARMA1.resultado	
									elseif (TIPODANO == 4) then
										ARMA2:rolarLocalmente()		
										DanoCALC = ARMA2.resultado	
									elseif (TIPODANO == 2) then
										DANOG:rolarLocalmente()		
										DanoCALC = DANOG.resultado	
									end
								DANFINAL = math.floor((DANMULT+bonCRIT)*DanoCALC)
								if (DANFINAL >= 999 and DAMAGELIM == false) then 
									DANFINAL = 999 	
									end;
								DANWEAK = math.floor((DANMULT+bonCRIT+0.5)*DanoCALC)
								if (DANWEAK >= 999 and DAMAGELIM == false) then 
									DANWEAK = 999 	
									end;
								DAN75 = math.floor((DANMULT+bonCRIT-0.25)*DanoCALC)
								if (DAN75 >= 999 and DAMAGELIM == false) then 
									DAN75 = 999 	
									end;
								DAN125 = math.floor((DANMULT+bonCRIT+0.25)*DanoCALC)
								if (DAN125 >= 999 and DAMAGELIM == false) then 
									DAN125 = 999 	
									end;
								if (2 >= ELDANO) then
									MSG_DANO = ("[§B]Dano: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_CRIT .. MSG_DM .. MSG_SubDEF .. MSG_DanType .. "[§K14]; ")
									elseif (ELDANO >= 3 and 11 >= ELDANO) then
										MSG_DANO = ("[§B]Dano: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_CRIT .. MSG_DM .. MSG_SubDEF .. MSG_DanType .. "[§K14]; [§B]Vs Weak: [§B]" .. MSG_corGolpe .. DANWEAK .. "[§K14]; ")
									elseif (ELDANO == 12) then
										MSG_DANO = ("[§B]Restaura: [§B]" .. MSG_corGolpe .. DANFINAL .. MSG_DM .. "[§K14]; [§B][§K4]-25%:[§K14] " .. DAN75 .. "[§K14]; [§B][§K9]+25%:[§K14] " .. DAN125 )
									end	
								if (TIPODANO == 1) then
									MSG_DANO ="";
									end
								if (actStatus1 == true) then
									local DadoStatus1 = math.random(1,100);
									rolagemStatus1 = getRollStatus(Status1, DadoStatus1, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status1) then 					
										MSG_Status1 = "CdS de [§B]" .. NomeStatus1 .. "[§B]: " .. rolagemStatus1 .. MSG_SubStatus1 .. " (" .. DadoStatus1 .. "); ";
										elseif (Status1 >= 6 and 8 >= Status1) then 
											MSG_Status1 = "CdS% de [§B]" .. NomeStatus1 .. "[§B]: " .. rolagemStatus1 .. " (" .. DadoStatus1 .. "); ";
										elseif (Status1 == 9) then 					
											MSG_Status1 = "CdS de [§B]" .. NomeStatus1 .. "[§B]: Auto (" .. DadoStatus1 .. "); ";
										end
									end	
										
								if (actStatus2 == true) then
									local DadoStatus2 = math.random(1,100);
										if SubStatus2 == 2 then MSG_SubStatus2 = "[-EVAM]" end
									rolagemStatus2 = getRollStatus(Status2, DadoStatus2, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status2) then 					
										MSG_Status2 = "CdS de [§B]" .. NomeStatus2 .. "[§B]: " .. rolagemStatus2 .. MSG_SubStatus2 .. " (" .. DadoStatus2 .. "); ";
										elseif (Status2 >= 6 and 8 >= Status2) then 
											MSG_Status2 = "CdS% de [§B]" .. NomeStatus2 .. "[§B]: " .. rolagemStatus2 .. " (" .. DadoStatus2 .. "); ";
										elseif (Status2 == 9) then 					
											MSG_Status2 = "CdS de [§B]" .. NomeStatus2 .. "[§B]: Auto (" .. DadoStatus2 .. "); ";
										end
									end		
								if (actStatus3 == true) then
									local DadoStatus3 = math.random(1,100);
									rolagemStatus3 = getRollStatus(Status3, DadoStatus3, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status3) then 					
										MSG_Status3 = "CdS de [§B]" .. NomeStatus3 .. "[§B]: " .. rolagemStatus3 .. MSG_SubStatus3 .. " (" .. DadoStatus3 .. "); ";
										elseif (Status3 >= 6 and 8 >= Status3) then 
											MSG_Status3 = "CdS% de [§B]" .. NomeStatus3 .. "[§B]: " .. rolagemStatus3 .. " (" .. DadoStatus3 .. "); ";
										elseif (Status3 == 9) then 					
											MSG_Status3 = "CdS de [§B]" .. NomeStatus3 .. "[§B]: Auto (" .. DadoStatus3 .. "); ";
										end
									end	
								if (actStatus4 == true) then
									local DadoStatus4 = math.random(1,100);
									rolagemStatus4 = getRollStatus(Status4, DadoStatus4, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status4) then 					
										MSG_Status4 = "CdS de [§B]" .. NomeStatus4 .. "[§B]: " .. rolagemStatus4 .. MSG_SubStatus4 .. " (" .. DadoStatus4 .. ");";
										elseif (Status4 >= 6 and 8 >= Status4) then 
											MSG_Status4 = "CdS% de [§B]" .. NomeStatus4 .. "[§B]: " .. rolagemStatus4 .. " (" .. DadoStatus4 .. ");";
										elseif (Status4 == 9) then 					
											MSG_Status4 = "CdS de [§B]" .. NomeStatus4 .. "[§B]: Auto (" .. DadoStatus4 .. ");";
										end
									end		
								if (actStatus5 == true) then
									local DadoStatus5 = math.random(1,100);
									rolagemStatus5 = getRollStatus(Status5, DadoStatus5, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status5) then 					
										MSG_Status5 = "CdS de [§B]" .. NomeStatus5 .. "[§B]: " .. rolagemStatus5 .. MSG_SubStatus5 .. " (" .. DadoStatus5 .. ");";
										elseif (Status5 >= 6 and 8 >= Status5) then 
											MSG_Status5 = "CdS% de [§B]" .. NomeStatus5 .. "[§B]: " .. rolagemStatus5 .. " (" .. DadoStatus5 .. ");";
										elseif (Status5 == 9) then 					
											MSG_Status5 = "CdS de [§B]" .. NomeStatus5 .. "[§B]: Auto (" .. DadoStatus5 .. ");";
										end
									end		
								if (actStatus6 == true) then
									local DadoStatus6 = math.random(1,100);
									rolagemStatus6 = getRollStatus(Status6, DadoStatus6, PRECM, DEXTE, MIND, EXPER);
									if (5 >= Status6) then 					
										MSG_Status6 = "CdS de [§B]" .. NomeStatus6 .. "[§B]: " .. rolagemStatus6 .. MSG_SubStatus6 .. " (" .. DadoStatus6 .. ");";
										elseif (Status6 >= 6 and 8 >= Status6) then 
											MSG_Status6 = "CdS% de [§B]" .. NomeStatus6 .. "[§B]: " .. rolagemStatus6 .. " (" .. DadoStatus6 .. ");";
										elseif (Status6 == 9) then 					
											MSG_Status6 = "CdS de [§B]" .. NomeStatus6 .. "[§B]: Auto (" .. DadoStatus6 .. ");";
										end
									end	
								if (REPEAT == 1) then
									mesa.activeChat:enviarMensagem(MSG_corGolpe .. NOME .. MSG_Ammo .. MSG_CMP .. MSG_TARGET .. MSG_ACERTO .. MSG_DANO .. MSG_Status1 .. MSG_Status2 .. MSG_Status3 .. MSG_Status4 .. MSG_Status5 .. MSG_Status6)
									elseif (REPEAT >= 2) then	
										mesa.activeChat:enviarMensagem("[§K14]#" .. i .. "; " .. MSG_TARGET .. MSG_ACERTO .. MSG_DANO .. MSG_Status1 .. MSG_Status2 .. MSG_Status3 .. MSG_Status4 .. MSG_Status5 .. MSG_Status6)
									end		
								end		
							end

					GastarMP = self.boxDetalhesDoItem.node.activeConsMP or false
					if (CMP >= 1 and GastarMP == true) then
						mesa.activeChat:enviarMensagem("/MP -" .. CMP);
						end
						
					GastarHP = self.boxDetalhesDoItem.node.activeConsHP or false
					CHP = self.boxDetalhesDoItem.node.campoCustoHP or 0
					if (CHP >= 1 and GastarHP == true) then
						mesa.activeChat:enviarMensagem("/HP -" .. CHP);
						end

					ExaurirON = self.boxDetalhesDoItem.node.activeSamCur or false
					Samurai = self.boxDetalhesDoItem.node.campoCurse or 0;
					NIVEL = sheet.basLV or 1;
					MSG_Exaurir =""
					if (Samurai >= 1 and ExaurirON == true) then
						ChanceEX = math.random(1,100);
						Modificador = Samurai-NIVEL;
						if (10 > Modificador) then 
							Modificador = 10;	
							end
						if (ChanceEX > Modificador) then 
							MSG_Exaurir = "A lâmina não exauriu"	
							end
						if (Modificador >= ChanceEX) then 
							MSG_Exaurir = "A lâmina exauriu, recebe Curse ( 4 )"	
							end
						mesa.activeChat:enviarMensagem(MSG_Exaurir .. "[" .. ChanceEX .. "(" .. Modificador .. "%)]");
						end								
						</event>
					</button>	
				</tab>
			</tabControl>
		</dataScopeBox>

		<layout left="630" top="250" width="225" height="300">
			<label left="50" top="00" width="150" height="20" text="Inimigos" horzTextAlign="center" autoSize="true" fontStyle="bold"/>
			<label left="0" top="00" width="20" height="20" text="S" horzTextAlign="center" autoSize="true" fontStyle="bold"/>
			<label left="25" top="00" width="20" height="20" text="G" horzTextAlign="center" autoSize="true" fontStyle="bold"/>
			<AlvoGol Top ="025" num="1"/>
			<AlvoGol Top ="050" num="2"/>
			<AlvoGol Top ="075" num="3"/>
			<AlvoGol Top ="100" num="4"/>
			<AlvoGol Top ="125" num="5"/>
			<AlvoGol Top ="150" num="6"/>
			<AlvoGol Top ="175" num="7"/>
			<AlvoGol Top ="200" num="8"/>
			<AlvoGol Top ="225" num="9"/>
			<AlvoGol Top ="250" num="10"/>
			<AlvoGol Top ="275" num="11"/>
			</layout>
		<layout left="855" top="250" width="225" height="300">
			<label left="50" top="00" width="150" height="20" text="Aliados" horzTextAlign="center" autoSize="true" fontStyle="bold"/>
			<label left="0" top="00" width="20" height="20" text="S" horzTextAlign="center" autoSize="true" fontStyle="bold"/>
			<label left="25" top="00" width="20" height="20" text="G" horzTextAlign="center" autoSize="true" fontStyle="bold"/>
			<Aliados Top ="025" num="1"/>
			<Aliados Top ="050" num="2"/>
			<Aliados Top ="075" num="3"/>
			<Aliados Top ="100" num="4"/>
			<Aliados Top ="125" num="5"/>
			<Aliados Top ="150" num="6"/>
			<Aliados Top ="175" num="7"/>
			<Aliados Top ="200" num="8"/>
			<Aliados Top ="225" num="9"/>
			<Aliados Top ="250" num="10"/>
			<Aliados Top ="275" num="11"/>
			</layout>


</form>
