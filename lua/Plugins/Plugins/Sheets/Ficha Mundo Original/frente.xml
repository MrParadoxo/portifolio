<?xml version="1.0" encoding="UTF-8"?>
<rectangle class="fundo">
	<scrollBox align="client">
		<flowLayout class="tile" align="top" height="500" margins="{left=10, right=10, top=10}" autoHeight="true" horzAlign="center" lineSpacing="2" name="fraFrenteLayout">
			<!-- PARTE SUPERIOR DA FRENTE -->
			<flowLayout class="oneLineTile" autoHeight="true" minScaledWidth="290" horzAlign="center">
				<!-- NOME DO PERSONAGEM -->				
				
				<flowPart name="flwNome1" minWidth="320" maxWidth="1600" frameStyle="frames/banner/dragon.xml" height="175" vertAlign="center" avoidScale="true">							
					<layout align="client" name="layNomeHolderFrente">
							<edit name="edtNome1" field="nome" class="transparente vcenter" fontSize="17" align="client"/>
							<label margins="{left=3}" name="labNome1" align="bottom" text="NOME DO PERSONAGEM" class="tituloCampo" autoSize="true"/>
					</layout>
				</flowPart>								

				<!-- GRID DE INFORMACOES SUPERIORES DA FRENTE -->
				<flowLayout  minWidth="320" maxWidth="1600" name="fraUpperGridFrente" avoidScale="true" frameStyle="frames/upperInfoGrid/frame.xml" autoHeight="true" vertAlign="trailing" maxControlsPerLine="3">								
						<upperGridCampo field="classe" minWidth="100" titulo="CLASSE"/>
						<upperGridCampo field="nivel" titulo="NÍVEL"/>
						<upperGridCampo field="nomeDoJogador" titulo="JOGADOR"/>									
						<upperGridCampo field="raca" minWidth="100" titulo="RAÇA"/>
						<upperGridCampo field="tendencia" titulo="TENDÊNCIA"/>
						<upperGridCampo field="experiencia.valor" titulo="EXPERIÊNCIA"/>
				</flowLayout>
			</flowLayout>

			<flowLineBreak/>

			<flowPart minWidth="280" maxWidth="800" height="64" frameStyle="frames/posCaptionEdit2/frame.xml">
				<edit align="left" class="pericia" field="heranca" width="70"/>
				<label align="client" text="BÔNUS DE HERANÇA" textTrimming="none" wordWrap="true" margins="{left=10}" class="tituloCampo" horzTextAlign="center"/>
			</flowPart>		

			<flowPart minWidth="280" maxWidth="800" height="64" frameStyle="frames/posCaptionEdit2/frame.xml">
				<edit align="left" class="pericia" field="souls" width="70"/>
				<label align="client" text="Quantidade de Souls" textTrimming="none" wordWrap="true" margins="{left=10}" class="tituloCampo" horzTextAlign="center"/>
			</flowPart>	

			<flowLineBreak/>

			<!-- TERCEIRA PARTE -->
			<flowLayout minWidth="235" maxWidth="1200" autoHeight="true" avoidScale="false" horzAlign="center" maxControlsPerLine="12" margins="{top=0}">
				<flowPart stepSizes="{105}" minScaledWidth="75" height="120" frameStyle="frames/panel4transp/frame.xml">
					<label align="top" text="Água" height="20" fontSize="9" wordWrap="true" horzTextAlign="center" textTrimming="none"/>
					<edit align="client" class="atributo transparente" field="aguaResistancia" fontSize="30"/>	
				</flowPart>
				<flowPart stepSizes="{105}" minScaledWidth="75" height="120" frameStyle="frames/panel4transp/frame.xml">
					<label align="top" text="Fogo" height="20" fontSize="9" wordWrap="true" horzTextAlign="center" textTrimming="none"/>
					<edit align="client" class="atributo transparente" field="fogoResistancia" fontSize="30"/>	
				</flowPart>
				<flowPart stepSizes="{105}" minScaledWidth="75" height="120" frameStyle="frames/panel4transp/frame.xml">
					<label align="top" text="Raio" height="20" fontSize="9" wordWrap="true" horzTextAlign="center" textTrimming="none"/>
					<edit align="client" class="atributo transparente" field="raioResistancia" fontSize="30"/>	
				</flowPart>
				<flowPart stepSizes="{105}" minScaledWidth="75" height="120" frameStyle="frames/panel4transp/frame.xml">
					<label align="top" text="Ar" height="20" fontSize="9" wordWrap="true" horzTextAlign="center" textTrimming="none"/>
					<edit align="client" class="atributo transparente" field="arResistancia" fontSize="30"/>	
				</flowPart>
				<flowPart stepSizes="{105}" minScaledWidth="75" height="120" frameStyle="frames/panel4transp/frame.xml">
					<label align="top" text="Gelo" height="20" fontSize="9" wordWrap="true" horzTextAlign="center" textTrimming="none"/>
					<edit align="client" class="atributo transparente" field="geloResistancia" fontSize="30"/>	
				</flowPart>
				<flowPart stepSizes="{105}" minScaledWidth="75" height="120" frameStyle="frames/panel4transp/frame.xml">
					<label align="top" text="Lava" height="20" fontSize="9" wordWrap="true" horzTextAlign="center" textTrimming="none"/>
					<edit align="client" class="atributo transparente" field="lavaResistancia" fontSize="30"/>	
				</flowPart>
				<flowPart stepSizes="{105}" minScaledWidth="75" height="120" frameStyle="frames/panel4transp/frame.xml">
					<label align="top" text="Chaos" height="20" fontSize="9" wordWrap="true" horzTextAlign="center" textTrimming="none"/>
					<edit align="client" class="atributo transparente" field="chaosResistancia" fontSize="30"/>	
				</flowPart>
				<flowPart stepSizes="{105}" minScaledWidth="75" height="120" frameStyle="frames/panel4transp/frame.xml">
					<label align="top" text="Veneno" height="20" fontSize="9" wordWrap="true" horzTextAlign="center" textTrimming="none"/>
					<edit align="client" class="atributo transparente" field="venenoResistancia" fontSize="30"/>	
				</flowPart>
				<flowPart stepSizes="{105}" minScaledWidth="75" height="120" frameStyle="frames/panel4transp/frame.xml">
					<label align="top" text="Luz" height="20" fontSize="9" wordWrap="true" horzTextAlign="center" textTrimming="none"/>
					<edit align="client" class="atributo transparente" field="luzResistancia" fontSize="30"/>	
				</flowPart>
				<flowPart stepSizes="{105}" minScaledWidth="75" height="120" frameStyle="frames/panel4transp/frame.xml">
					<label align="top" text="Escuridão" height="20" fontSize="9" wordWrap="true" horzTextAlign="center" textTrimming="none"/>
					<edit align="client" class="atributo transparente" field="escuridaoResistancia" fontSize="30"/>	
				</flowPart>
				<flowPart stepSizes="{105}" minScaledWidth="75" height="120" frameStyle="frames/panel4transp/frame.xml">
					<label align="top" text="Físico" height="20" fontSize="9" wordWrap="true" horzTextAlign="center" textTrimming="none"/>
					<edit align="client" class="atributo transparente" field="fisicoResistancia" fontSize="30"/>	
				</flowPart>
				<flowPart stepSizes="{105}" minScaledWidth="75" height="120" frameStyle="frames/panel4transp/frame.xml">
					<label align="top" text="Magico" height="20" fontSize="9" wordWrap="true" horzTextAlign="center" textTrimming="none"/>
					<edit align="client" class="atributo transparente" field="magicoResistancia" fontSize="30"/>	
				</flowPart>
			</flowLayout>

			<flowLineBreak/>

			<!-- SEGUNDA PARTE -->			
			<flowLayout autoHeight="true" class="oneLineTile" minScaledWidth="290" horzAlign="center">
			<!-- ATRIBUTOS -->
			
				<flowLayout name="fraLayAtributos" class="tile" vertAlign="leading" autoHeight="true" minScaledWidth="290" maxControlsPerLine="3" horzAlign="center" lineSpacing="10" frameStyle="frames/panel1/frame.xml" margins="{left=2, top=2, right=16, bottom=4}" avoidScale="true">
					<boxAtributo titulo="FORÇA" field="forca">
						{{"Atletismo", "atletismo"}}
					</boxAtributo>
					
					<boxAtributo titulo="DESTREZA" field="destreza">
						{{"Acrobacia", "acrobacia"}}
					</boxAtributo>
					
					<boxAtributo titulo="AGILIDADE" field="agilidade">
						{{"Furtividade", "furtividade"},
						{"Ladinagem", "ladinagem"},
						{"Percepção", "percepcao"}}
					</boxAtributo>

					<boxAtributo titulo="CONSTITUIÇÃO" field="constituicao">
						{{"Teste de Resistencia", "tr"}}
					</boxAtributo>

					<boxAtributo titulo="INTELIGÊNCIA" field="inteligencia">
						{{"Arcanismo", "arcanismo"}, 
						 {"Investigação", "investigacao"},
						 {"Sobrevivência", "sobrevivencia"},
						 {"Intuição", "intuicao"}}								
					</boxAtributo>
					
					<boxAtributo titulo="SABEDORIA" field="sabedoria">
						{{"Adestrar Animais", "adestrarAnimais"}, 
						 {"Religião", "religiao"},
						 {"Medicina", "medicina"},
						 {"Historia", "historia"}}									
					</boxAtributo>
					
					<boxAtributo titulo="CARISMA" field="carisma">
						{{"Atuação", "atuacao"}, 
						 {"Enganação", "enganacao"},
						 {"Intimidação", "intimidacao"},
						 {"Persuasão", "persuasao"}}									 
					</boxAtributo>

					<boxAtributo titulo="VONTADE" field="vontade"/>

					<dataLink field="atributos.chanceCritico">
						<event name="onChange">		
							local numAsStr = tostring(newValue);
							local numero;
							
							if numAsStr ~= "" then
								numero = tonumber(newValue);
							else
								numero = nil;
							end;

							if type(sheet.atributos) ~= 'table' then
								sheet.atributos = {};
							end;				
							
							if type(numero) == 'number' then
								local modificador = math.floor(numero / 3);								
								sheet.atributos.modchanceCritico = modificador;	
								sheet.atributos.modchanceCriticostr = modificador .. "%";	
							else
								sheet.atributos.modchanceCritico = nil;
								sheet.atributos.modchanceCriticostr = nil;
							end;
						</event>
					</dataLink>
					
					<flowPart height="140" minWidth="320" maxWidth="420" minScaledWidth="305" frameStyle="frames/atributeFrame2/frame.xml">
						<layout left="6" top="12" width="116" height="115">
							<edit class="atributo"  align="top" margins="{left=30, right=30}" field="atributos.chanceCritico" height="30" type="number" min="0"/>								
						</layout>
						
						<label frameRegion="modificador" field="atributos.modchanceCriticostr" horzTextAlign="center" vertTextAlign="center" fontSize="36" fontStyle="bold"/>
						<label frameRegion="titulo" text="CHANCE DE CRÍTICO" vertTextAlign="center" horzTextAlign="center" fontSize="11"/>
					</flowPart>

					<dataLink field="atributos.danoCritico">
						<event name="onChange">		
							local numAsStr = tostring(newValue);
							local numero;
							
							if numAsStr ~= "" then
								numero = tonumber(newValue);
							else
								numero = nil;
							end;

							if type(sheet.atributos) ~= 'table' then
								sheet.atributos = {};
							end;				
							
							if type(numero) == 'number' then
								local modificador = math.floor(numero / 2.5);								
								sheet.atributos.moddanoCritico = modificador;	
								sheet.atributos.moddanoCriticostr = modificador .. "%";	
							else
								sheet.atributos.moddanoCritico = nil;
								sheet.atributos.moddanoCriticostr = nil;
							end;
						</event>
					</dataLink>
					
					<flowPart height="140" minWidth="320" maxWidth="420" minScaledWidth="305" frameStyle="frames/atributeFrame2/frame.xml">
						<layout left="6" top="12" width="116" height="115">
							<edit class="atributo"  align="top" margins="{left=30, right=30}" field="atributos.danoCritico" height="30" type="number" min="0"/>								
						</layout>
						
						<label frameRegion="modificador" field="atributos.moddanoCriticostr" horzTextAlign="center" vertTextAlign="center" fontSize="36" fontStyle="bold"/>
						<label frameRegion="titulo" text="DANO CRÍTICO" vertTextAlign="center" horzTextAlign="center"/>
					</flowPart>

					<dataLink field="atributos.amplificador">
						<event name="onChange">		
							local numAsStr = tostring(newValue);
							local numero;
							
							if numAsStr ~= "" then
								numero = tonumber(newValue);
							else
								numero = nil;
							end;

							if type(sheet.atributos) ~= 'table' then
								sheet.atributos = {};
							end;				
							
							if type(numero) == 'number' then
								local modificador = math.floor(numero / 10);								
								sheet.atributos.modamplificador = modificador;	
								sheet.atributos.modamplificadorstr = modificador .. "%";	
							else
								sheet.atributos.modamplificador = nil;
								sheet.atributos.modamplificadorstr = nil;
							end;
						</event>
					</dataLink>
					
					<flowPart height="140" minWidth="320" maxWidth="420" minScaledWidth="305" frameStyle="frames/atributeFrame2/frame.xml">
						<layout left="6" top="12" width="116" height="115">
							<edit class="atributo"  align="top" margins="{left=30, right=30}" field="atributos.amplificador" height="30" type="number" min="0"/>								
						</layout>
						
						<label frameRegion="modificador" field="atributos.modamplificadorstr" horzTextAlign="center" vertTextAlign="center" fontSize="36" fontStyle="bold"/>
						<label frameRegion="titulo" text="AMPLIFICADOR" vertTextAlign="center" horzTextAlign="center"/>
					</flowPart>

					<dataLink fields="{'atributos.modforca','atributos.moddestreza','atributos.modagilidade','atributos.modconstituicao','atributos.modinteligencia','atributos.modsabedoria','atributos.modcarisma','atributos.modvontade'}">
						<event name="onChange">
							if sheet==nil then return end;
							if sheet.atributos==nil then return end;
							local forca = string.gsub(sheet.atributos.modforca or "", "+", "");
							local destreza = string.gsub(sheet.atributos.moddestreza or "", "+", "");
							local agilidade = string.gsub(sheet.atributos.modagilidade or "", "+", "");
							local constituicao = string.gsub(sheet.atributos.modconstituicao or "", "+", "");
							local inteligencia = string.gsub(sheet.atributos.modinteligencia or "", "+", "");
							local sabedoria = string.gsub(sheet.atributos.modsabedoria or "", "+", "");
							local carisma = string.gsub(sheet.atributos.modcarisma or "", "+", "");
							local vontade = string.gsub(sheet.atributos.modvontade or "", "+", "");

							sheet.souls = 	(tonumber(forca) or 0) + 
											(tonumber(destreza) or 0) + 
											(tonumber(agilidade) or 0) + 
											(tonumber(constituicao) or 0) + 
											(tonumber(inteligencia) or 0) + 
											(tonumber(sabedoria) or 0) + 
											(tonumber(carisma) or 0) + 
											(tonumber(vontade) or 0);
						</event>
					</dataLink>
				</flowLayout>
				
				<!-- segunda coluna -->
				
				<flowLayout autoHeight="true" horzAlign="center" vertAlign="leading" class="halfTile" maxControlsPerLine="2" maxWidth="600">
					
					<flowLayout minWidth="202" maxWidth="202" autoHeight="true" avoidScale="false" vertAlign="center" horzAlign="center">
						<rectangle width="202" height="602" padding="{left=1,right=1,top=1,bottom=1}" color="black" strokeColor="white" strokeSize="1"> 
							<image width="200" height="600" field="avatarHead"/>
							<image width="200" height="600" field="avatarBody"/>
							<image width="200" height="600" field="avatarArms"/>
							<image width="200" height="600" field="avatarLegs"/>
							<image width="200" height="600" field="avatarBoot"/>
						</rectangle>
					</flowLayout>

					<flowLayout minWidth="202" maxWidth="202" autoHeight="true" avoidScale="false" vertAlign="center" horzAlign="center">
						<layout left="202" width="200" height="602">
							<BodyColor text="Capacete" slot="avatarHead" items="{'Água','Fogo','Raio','Ar','Gelo','Lava','Chaos','Veneno','Luz','Escuridão','Físico','Magico','Nenhum'}" values="{'head/Agua.png','head/Fogo.png','head/Raio.png','head/Ar.png','head/Gelo.png','head/Lava.png','head/Chaos.png','head/Veneno.png','head/Luz.png','head/Escuridao.png','head/Fisico.png','head/Magico.png','head/'}" field="cabeca"/>


							<BodyColor text="Peitoral" slot="avatarBody" items="{'Água','Fogo','Raio','Ar','Gelo','Lava','Chaos','Veneno','Luz','Escuridão','Físico','Magico','Nenhum'}" values="{'body/Agua.png','body/Fogo.png','body/Raio.png','body/Ar.png','body/Gelo.png','body/Lava.png','body/Chaos.png','body/Veneno.png','body/Luz.png','body/Escuridao.png','body/Fisico.png','body/Magico.png','body/'}" field="corpo"/>


							<BodyColor text="Luva" slot="avatarArms" items="{'Água','Fogo','Raio','Ar','Gelo','Lava','Chaos','Veneno','Luz','Escuridão','Físico','Magico','Nenhum'}" values="{'arms/Agua.png','arms/Fogo.png','arms/Raio.png','arms/Ar.png','arms/Gelo.png','arms/Lava.png','arms/Chaos.png','arms/Veneno.png','arms/Luz.png','arms/Escuridao.png','arms/Fisico.png','arms/Magico.png','arms/'}" field="bracos"/>


							<BodyColor text="Calça" slot="avatarLegs" items="{'Água','Fogo','Raio','Ar','Gelo','Lava','Chaos','Veneno','Luz','Escuridão','Físico','Magico','Nenhum'}" values="{'legs/Agua.png','legs/Fogo.png','legs/Raio.png','legs/Ar.png','legs/Gelo.png','legs/Lava.png','legs/Chaos.png','legs/Veneno.png','legs/Luz.png','legs/Escuridao.png','legs/Fisico.png','legs/Magico.png','legs/'}" field="pernas"/>


							<BodyColor text="Bota" slot="avatarBoot" items="{'Água','Fogo','Raio','Ar','Gelo','Lava','Chaos','Veneno','Luz','Escuridão','Físico','Magico','Nenhum'}" values="{'boot/Agua.png','boot/Fogo.png','boot/Raio.png','boot/Ar.png','boot/Gelo.png','boot/Lava.png','boot/Chaos.png','boot/Veneno.png','boot/Luz.png','boot/Escuridao.png','boot/Fisico.png','boot/Magico.png','boot/'}" field="pes"/>
						</layout>
					</flowLayout>								
				</flowLayout>
			</flowLayout>

		</flowLayout>	
	</scrollBox>
</rectangle>	